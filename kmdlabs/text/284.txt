==============================================================
Guild: Komodo
Channel: kmdlabs
Topic: Please read pinned messages
Messages: 100
Range: 
==============================================================

[09-Feb-19 09:39 AM] blackjok3r#3181
Sorry guys been out all day.. Can someone try a fresh sync of RE? If it syncs I think the fix worked

[09-Feb-19 09:54 AM] Alright#0419
@blackjok3r what about the notarypay dos?

[09-Feb-19 09:55 AM] blackjok3r#3181
As long as the chain syncs then the fix works that's a different problem... Will need to spend decent time on it, haven't been able to yet

[09-Feb-19 10:08 AM] zatJUM#9924
@blackjok3r  I'm doing it now

[09-Feb-19 10:18 AM] blackjok3r#3181
I think of syncs the fork from what alright said... I'm mostly interested if notarizations after the attack still were able to happen

[09-Feb-19 10:19 AM] blackjok3r#3181
It appeared that the code got confused... Not all nodes saw the same notarizations... But until I properly look at it... Can't really know, it will take quite some time to analyse what happened 😅

[09-Feb-19 10:20 AM] Alright#0419
notaries that have not restarted since the attack are on a much shorter chain

[09-Feb-19 10:20 AM] Alright#0419
@blackjok3r if you need notarizations to happen, you should ping notaries and tell them to resync

[09-Feb-19 10:20 AM] Alright#0419
don't think they will happen otherwise

[09-Feb-19 10:21 AM] blackjok3r#3181
Not important right now... I haven't even touched mine

[09-Feb-19 10:21 AM] Alright#0419
what height is it at?

[09-Feb-19 10:21 AM] blackjok3r#3181
I'd rather have a copy of the stuck chain to see what caused it

[09-Feb-19 10:21 AM] blackjok3r#3181
I don't know

[09-Feb-19 10:22 AM] zatJUM#9924
block 1154 ```00c9c48d65ff1a66b1c215ad69767e1d6f4f751f99451f08f98c65a580262b2d```

[09-Feb-19 10:22 AM] Alright#0419
LABSTRE owned.

{Reactions}
😬 

[09-Feb-19 10:38 AM] CrisF#3405
```[LABST2] 69.200% 2127 of 3072```
stuck

[09-Feb-19 10:39 AM] blackjok3r#3181
Yeah 2 can't sync known problem

[09-Feb-19 10:40 AM] blackjok3r#3181
The fix added to test RE should prevent that happening again... But alrights attack was far worse than I expected

{Reactions}
💣 

[09-Feb-19 10:40 AM] ComputerGenie 👴🏼📢#7004
damn, I leave you kinds alone for one night and I return to this:
```-ASSET-          -BALANCE-  -UTXO-  -NOTR-  -BLOX-   -PCT-  -LAST-  -CNCT-
KMD                 3.8032      48         1221042          13h22m      20
LABST2            788.7364       9     136    3072    4.4%  16h22m      17
LABST5              2.1978      20     151    2053    7.4%  14h46m      18
LABSTRE             5.0603      20      22     394    5.6%  13h22m       8```
🤦🏽

[09-Feb-19 10:41 AM] blackjok3r#3181
Lol.... Alrights too good at attacks :D

{Reactions}
💥 

[09-Feb-19 10:41 AM] Alright#0419
I feel like you guys aren't getting the point of *test* chains

[09-Feb-19 10:41 AM] Alright#0419
we make them to break them

{Reactions}
👆 

[09-Feb-19 10:41 AM] Alright#0419
joker and I aren't really monitoring any of the chain's health

[09-Feb-19 10:41 AM] Alright#0419
typically focused on one or maybe two at a time

[09-Feb-19 10:42 AM] ComputerGenie 👴🏼📢#7004
`I feel like you guys aren't getting the point of test chains`
The point is to keep breaking it before the rest of us even get to sync it? 🤔

[09-Feb-19 10:42 AM] ComputerGenie 👴🏼📢#7004
:troll:

[09-Feb-19 10:43 AM] blackjok3r#3181
Yes generally... To test something specific usually a new chain is needed as a consensus rule has been changed

[09-Feb-19 10:43 AM] blackjok3r#3181
I have been basically stopping mining the old ones once a problem is isolated then start a new one to test fix

[09-Feb-19 10:44 AM] blackjok3r#3181
Its really quite amazing we have this platform that males this so easy

[09-Feb-19 10:44 AM] ComputerGenie 👴🏼📢#7004
nm, you missed the joke; I was saying that they were all broken before I even got a *chance* to test them 😛

[09-Feb-19 10:44 AM] blackjok3r#3181
Haha tbh I do t know what happened last night...

[09-Feb-19 10:44 AM] blackjok3r#3181
I had about 12 beers and just watched it explode

[09-Feb-19 10:45 AM] blackjok3r#3181
Lol

[09-Feb-19 10:45 AM] ComputerGenie 👴🏼📢#7004
`I had about 12 beers and just watched it explode`
So, just another one of those "days that end in 'y' " things then? :troll:

[09-Feb-19 10:46 AM] blackjok3r#3181
Yeah old mate was in town... Can't and got me from my house.. When I got back everyone was ready so we just did it

[09-Feb-19 10:46 AM] Alright#0419
h mya nae is joker i adea ev the LABS thig

{Reactions}
abusedsmily troll_king (2) 

[09-Feb-19 10:48 AM] blackjok3r#3181
Band at pub tonight 🤣 ... Don't think its a good plan... See what happens

{Reactions}
🍻 

[09-Feb-19 03:48 PM] blackjok3r#3181
Didn't go

[09-Feb-19 03:49 PM] blackjok3r#3181
Bad idea

[09-Feb-19 06:25 PM] SHossain#0007
LABST2 is broken? can't sync from scratch.. been showing this for some time now
```
[LABST2] 69.200% 2127 of 3072
```

[09-Feb-19 06:27 PM] ComputerGenie 👴🏼📢#7004
it's been borked for almost 24 hrs

[09-Feb-19 06:27 PM] SHossain#0007
yeah

[09-Feb-19 06:27 PM] SHossain#0007
right

[09-Feb-19 06:28 PM] SHossain#0007
i did clean data dir to try out

[10-Feb-19 01:03 AM] blackjok3r#3181
It doesn't sync there is invalid block in the chain

[10-Feb-19 01:04 AM] blackjok3r#3181
I can add height exception for this but I think its easier o remove the chain

[10-Feb-19 08:11 AM] blackjok3r#3181
@LabsAssistant Can notaries who have LABSTRE chain please resync to get of the "fork" I dont really understand what happened still.,.. Notarised height went from 320, to 260 after resyncing here... My guess is that Alrights attacking chain, is longer so it follows that chain, which is expected behaviour... 
We need to do this attack les brutally, just reorging a single block will suffice to test my fix properly. All we needed to test was if a reorged notaristion will recreate the correct coinbase.

[10-Feb-19 08:12 AM] blackjok3r#3181
I also removed LABST2 because it cannot sync... there is no reason to keep it there... just messing things up.

{Reactions}
👍 (4) 

[10-Feb-19 08:23 AM] blackjok3r#3181
I think there is still a possibility of an invalid block being mined, and that is what appears to have caused th chain to fork... But I really dont know how Alright did what ever it was he did that caused this. So likely we will need to work on recreating that situation, without notary pay... and try to see what caused it. When there is like 100 notarisations in the mempool, it apears it cannot mine any of them for some reason... Or the only current miner isnt minign any txn's

[10-Feb-19 08:26 AM] CrisF#3405
```
LABST5
000000007849afb8b71da83ab05954ac2074819ec4a521cf45e223a817ed6c88
LABSTRE
000c031ffb6840bc925d7297ed08b65467ae48da3249a9503d1946b9b93e9504
```

[10-Feb-19 08:27 AM] CrisF#3405
LABSTRE ```"blocks": 2450,
  "longestchain": 2450,```

[10-Feb-19 08:30 AM] CrisF#3405
After latest re-start.  Haven't been able to make UTXOs for LABSTRE.

[10-Feb-19 08:34 AM] blackjok3r#3181
try dwy_attack_mitigation.sh then try to resplit

[10-Feb-19 08:34 AM] blackjok3r#3181
laybe it doesnt have any avalible utxo atm

[10-Feb-19 08:35 AM] CrisF#3405
```./dwy_attack_mitigation.sh
[LABST5] Cleaning Wallet
[LABST5] 0 utxo remaining
[LABST5] Wallet Clean!
[LABSTRE] Cleaning Wallet
[LABSTRE] Wallet Clean!
```

[10-Feb-19 08:36 AM] CrisF#3405
```./asset-cli LABSTRE getbalance
5.00040000
```

[10-Feb-19 08:36 AM] blackjok3r#3181
listunspent ?

[10-Feb-19 08:37 AM] CrisF#3405
`./utxosplitter.sh`
```[LABSTRE] Listuspent call failed aborting!
```

[10-Feb-19 08:37 AM] blackjok3r#3181
yes do listunspent. I think the cron has already split it so it cant splkit until that is confirmed

[10-Feb-19 08:37 AM] blackjok3r#3181
this happens a lot... I useally never manyally split.. just wait until the cron handles it

[10-Feb-19 08:38 AM] blackjok3r#3181
saves running into weird errors...

[10-Feb-19 08:38 AM] CrisF#3405
```./asset-cli LABSTRE listunspent
[
]
```

[10-Feb-19 08:38 AM] blackjok3r#3181
yep need to wait until it confirms... I ahve a feeling Alright is ming this chain and not minign any tx at all.

[10-Feb-19 08:39 AM] blackjok3r#3181
I will get a miing node up in a moment, doing a few thigns at once atm

[10-Feb-19 08:40 AM] CrisF#3405
LABSTRE ```  "difficulty": 7.707226977383481,
```

[10-Feb-19 08:41 AM] blackjok3r#3181
maybe you cna just setgenerate ? and mine your won tx for now... thats nto very high lol

[10-Feb-19 08:41 AM] CrisF#3405
Yeah 😃

[10-Feb-19 08:41 AM] blackjok3r#3181
my notary had like 50-60 tx in it mempool, but when I restarted it... they were all gone... which cuks as I wanted to see why it wasnt mining them 😦

[10-Feb-19 08:49 AM] CrisF#3405
Yeah, that worked.  Mining and utxosplitter went through. 
2 cores got it moving .  Maybe noone was mining, haha.

[10-Feb-19 08:50 AM] blackjok3r#3181
The chain was moving,,, but whe ever it was minng wasnt including any tx in blocks

[10-Feb-19 08:50 AM] blackjok3r#3181
the notarized height is now starting to update I have 1210 now

[10-Feb-19 08:51 AM] CrisF#3405
Got a notarization there.

{Reactions}
👍 

[10-Feb-19 08:52 AM] blackjok3r#3181
its starting to mine notarizations from like 1000 blocks ago 😂

[10-Feb-19 08:52 AM] CrisF#3405
I updated a little before you posted.  Finally got synced.  Wasn't able to sync fo about 20hrs.

[10-Feb-19 08:53 AM] blackjok3r#3181
and ti seems its mining them in order 😄 which is AWESOME!

[10-Feb-19 08:53 AM] CrisF#3405
🎉

[10-Feb-19 08:53 AM] CrisF#3405
How are you checking that (where seeing?)

[10-Feb-19 08:54 AM] blackjok3r#3181
stdout... I had to starte LABSTRE manually... did start.sh then stopped RE and restartedf it in diffrent termial from `master` directory

[10-Feb-19 08:54 AM] blackjok3r#3181
I thgink it would be nice to see the prints fromt he node thats mining... can you stop mining for a little bit and let me try ?

[10-Feb-19 08:55 AM] blackjok3r#3181
hmm dw

[10-Feb-19 08:55 AM] blackjok3r#3181
its already ran out of ntoarizations

[10-Feb-19 08:55 AM] blackjok3r#3181
the one that just happened wsa just confirmed, so all previous are now invalid

[10-Feb-19 08:55 AM] CrisF#3405
Stopped mining.

[10-Feb-19 08:56 AM] CrisF#3405
How mush is BR on this cahin? .0001?

[10-Feb-19 08:56 AM] blackjok3r#3181
keep mining 😃 I know whats was wrong with it now  and by seeing what order they came in... I can be pretty confident that its working properly

[10-Feb-19 08:57 AM] blackjok3r#3181
BR should be 0, + tx fees

[10-Feb-19 08:57 AM] blackjok3r#3181
if you mine a notarizartion block you get some of the notarizarion fee for that

[10-Feb-19 08:58 AM] CrisF#3405
By balance increased noticably (just fees)

{Reactions}
👍 

[10-Feb-19 08:59 AM] blackjok3r#3181
with the dwy_mitigation script, we can now mine with ntoary nodes just fine... if they mine a 0BR block, the walelt ignores that 0 valud coinbase, and the notray pay and coinbase (fees) can me merged with that script every few horus or whatever so the iguana can still find its utxos easlily enough.

{Reactions}
😃 

[10-Feb-19 09:00 AM] blackjok3r#3181
I think I am going to put that on my real notary node for mined funds lol... wayt simpler than it works atm.

[10-Feb-19 09:01 AM] blackjok3r#3181
not sure staking works on notary though...

[10-Feb-19 09:01 AM] blackjok3r#3181
wallet filter would screw with it

[10-Feb-19 09:01 AM] CrisF#3405
```"balance": 5.23555000,
  "blocks": 2466,
  "longestchain": 2466,

"balance": 5.55525000,
  "blocks": 2499,
  "longestchain": 2499,```

[10-Feb-19 09:02 AM] blackjok3r#3181
mayeb 5 is deaded too... likely has nbody staking...

[10-Feb-19 09:02 AM] blackjok3r#3181
my computer been off for a few days

[10-Feb-19 09:03 AM] CrisF#3405
I haven't had a notarization on 5 for 36 hours.

{Reactions}
👍 

[10-Feb-19 09:03 AM] blackjok3r#3181
likey unimportant... once I get some time I will get a staker back up and check it out.... also will probably need a fresh sync tested

[10-Feb-19 09:04 AM] blackjok3r#3181
looks like RE is back on track now miners are including tx in blocks :troll_cool:

[10-Feb-19 09:04 AM] CrisF#3405
`5````"blocks": 2053,
  "longestchain": 0,
```

[10-Feb-19 09:16 AM] blackjok3r#3181
should be moving again, and chain appears to sync just fine here

