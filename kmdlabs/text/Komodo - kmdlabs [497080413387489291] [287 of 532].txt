==============================================================
Guild: Komodo
Channel: kmdlabs
Topic: Please read pinned messages
Messages: 100
Range: 
==============================================================

[12-Feb-19 03:40 AM] blackjok3r#3181
its desinged to fix itself aftera  1 or 2 block natrul rteorg

[12-Feb-19 03:41 AM] blackjok3r#3181
not a costnat reorg by 1 miner

[12-Feb-19 03:41 AM] blackjok3r#3181
I am mingi alonger chain

[12-Feb-19 03:41 AM] Alright#0419
ok

[12-Feb-19 03:41 AM] blackjok3r#3181
but maybe ntaires are not on it atm ðŸ¤·

[12-Feb-19 03:41 AM] Alright#0419
what is the difference between the nodes I banned and the nodes I didn't?

[12-Feb-19 03:41 AM] blackjok3r#3181
the last notarization they saw

[12-Feb-19 03:41 AM] blackjok3r#3181
you reorged faster than the block propagestd to them is my guess

[12-Feb-19 03:42 AM] Alright#0419
are you on this chain? http://140.82.3.117:3003/

{Embed}
http://140.82.3.117:3003/
Komodo Explorer
Komodo Insight. View detailed information on all komodo transactions and block. {{ $root.title + $root.titleDetail }}

[12-Feb-19 03:43 AM] blackjok3r#3181
mine is longer

[12-Feb-19 03:43 AM] blackjok3r#3181
my node here and my notary are on it

[12-Feb-19 03:43 AM] Alright#0419
you don't see it as a problem that I just forked the network at will?

[12-Feb-19 03:43 AM] blackjok3r#3181
last seen notarization i s4955

[12-Feb-19 03:43 AM] blackjok3r#3181
im telling you we cant fix it

[12-Feb-19 03:43 AM] blackjok3r#3181
so stoip breekain git

[12-Feb-19 03:43 AM] blackjok3r#3181
with pos% this attack is impossioble

[12-Feb-19 03:44 AM] Alright#0419
not impossible, just harder

[12-Feb-19 03:44 AM] blackjok3r#3181
why would any do it

[12-Feb-19 03:45 AM] blackjok3r#3181
maybe we could detect what IP causes a reorg and ban him

[12-Feb-19 03:45 AM] blackjok3r#3181
ðŸ¤·

[12-Feb-19 03:45 AM] Alright#0419
I don't understand the difference between each fork

[12-Feb-19 03:45 AM] Alright#0419
my notary is on explorer chain

[12-Feb-19 03:45 AM] Alright#0419
all 3 of my nodes are on the same chain

[12-Feb-19 03:45 AM] blackjok3r#3181
last notarized height

[12-Feb-19 03:45 AM] blackjok3r#3181
mine is 4955

[12-Feb-19 03:45 AM] blackjok3r#3181
what is your?

[12-Feb-19 03:45 AM] Alright#0419
4976

[12-Feb-19 03:48 AM] Alright#0419
just reorged to 4998

[12-Feb-19 03:48 AM] Alright#0419
what was that?

[12-Feb-19 03:48 AM] Alright#0419
did you do that or did it just fix itself somehow?

[12-Feb-19 03:50 AM] blackjok3r#3181
what I can see ... my mining node here ...

[12-Feb-19 03:50 AM] blackjok3r#3181
is very far from all other ndoes

[12-Feb-19 03:50 AM] blackjok3r#3181
bad ping

[12-Feb-19 03:51 AM] blackjok3r#3181
It didnt see 4935 in it emmpool (whena ll other nodes did) and it mined a block with 4955 in it

[12-Feb-19 03:51 AM] blackjok3r#3181
which all other nnodes rejected

[12-Feb-19 03:51 AM] blackjok3r#3181
except my notary... which was close in ping to it

[12-Feb-19 03:52 AM] blackjok3r#3181
I am pretty sure once I ming a onger chain to you attacking chain everyone wil just switch to it.... unless your cahin gets notarized

[12-Feb-19 03:54 AM] blackjok3r#3181
chain seems to have totally fixed itself

[12-Feb-19 03:54 AM] blackjok3r#3181
moving along nicly notarization being paid out... there was one long gap, which paid extra

[12-Feb-19 03:54 AM] blackjok3r#3181
works fine... just havbe to wait for DOS to stop.... like I said with PoS % this cant really happen for long enough to be a problem

[12-Feb-19 03:55 AM] blackjok3r#3181
as long as the attacker isnt he only miner... but really how can you stop a 100% attack

[12-Feb-19 03:55 AM] blackjok3r#3181
?

[12-Feb-19 03:57 AM] Alright#0419
fresh sync is broken

[12-Feb-19 03:57 AM] blackjok3r#3181
checking now

[12-Feb-19 03:58 AM] Alright#0419
```
2019-02-12 03:57:25 UpdateTip: new best=0000962c10b0b2061259509ee7beaf2328112b42fc6add2152625ca2948f4450  height=4963  log2_work=20.634217  log2_stake=-inf  tx=6387  date=2019-02-12 03:33:58 progress=0.988645  cache=1.6MiB(5696tx)
2019-02-12 03:57:25 ERROR: ConnectBlock(): Notarisation is not in TX position 1! Invalid Block!
2019-02-12 03:57:25 Misbehaving: 103.6.12.112:17154 (0 -> 100)
2019-02-12 03:57:25 InvalidChainFound: invalid block=0006066789bcbde711aef6c1240ce25eb277d0d8d285b55555ffeb5b60779c5c  height=4964  log2_work=20.634387  log2_stake=-inf  date=2019-02-12 03:34:01
2019-02-12 03:57:25 InvalidChainFound:  current best=0000962c10b0b2061259509ee7beaf2328112b42fc6add2152625ca2948f4450  height=4963  log2_work=20.634217  log2_stake=-inf  date=2019-02-12 03:33:58
2019-02-12 03:57:25 ERROR: ConnectTip(): ConnectBlock 0006066789bcbde711aef6c1240ce25eb277d0d8d285b55555ffeb5b60779c5c failed
2019-02-12 03:57:25 InvalidChainFound: invalid block=0006066789bcbde711aef6c1240ce25eb277d0d8d285b55555ffeb5b60779c5c  height=4964  log2_work=20.634387  log2_stake=-inf  date=2019-02-12 03:34:01
2019-02-12 03:57:25 InvalidChainFound:  current best=0000962c10b0b2061259509ee7beaf2328112b42fc6add2152625ca2948f4450  height=4963  log2_work=20.634217  log2_stake=-inf  date=2019-02-12 03:33:58
2019-02-12 03:57:25 UpdateTip: new best=00007004745b39dd6bb032302b90d593a936fc83fc120990a1af52d711ad4f72  height=4964  log2_work=20.634387  log2_stake=-inf  tx=6388  date=2019-02-12 03:36:50 progress=0.988845  cache=1.6MiB(5697tx)
2019-02-12 03:57:25 Warning: Found invalid chain at least ~6 blocks longer than our best chain.
```

[12-Feb-19 04:03 AM] Alright#0419
Why did we decide against a static amount paid to each notary for each notarization? Simple to keep emissions static?

[12-Feb-19 04:03 AM] Alright#0419
I think that complicated this *a lot*. Maybe there was another reason I'm forgetting

[12-Feb-19 04:03 AM] blackjok3r#3181
becasus the coin emission is fucked doing that

[12-Feb-19 04:03 AM] blackjok3r#3181
and it was impossible

[12-Feb-19 04:03 AM] blackjok3r#3181
to determine what a valid notarisation was

[12-Feb-19 04:03 AM] blackjok3r#3181
notaris can just make txns and creqate free money

[12-Feb-19 04:04 AM] blackjok3r#3181
the onlt problem is miners not minign notarisations

[12-Feb-19 04:04 AM] blackjok3r#3181
as long as they mine them this it works perfectly fine

[12-Feb-19 04:04 AM] Alright#0419
Do you have any kind of explanation for what exactly just happened?

[12-Feb-19 04:04 AM] blackjok3r#3181
yes I already explained it

[12-Feb-19 04:04 AM] Alright#0419
I can't wrap my head around it

[12-Feb-19 04:04 AM] blackjok3r#3181
look the node who mined the notarization that created the invalid block

[12-Feb-19 04:04 AM] blackjok3r#3181
saw the notarisation as invlid

[12-Feb-19 04:06 AM] blackjok3r#3181
and it ended up in a diffrent tx posiiton ... I wrot code to fix this problem... but it doesnt work when you try and dos it with a 100% attack... I dont think this is a realy problem... we use pos % and you dont attack our own cahin anymore :troll_cool:

[12-Feb-19 04:06 AM] Alright#0419
we have nodes running the same code. Some accepted it, some rejected it

[12-Feb-19 04:06 AM] Alright#0419
......wat.

[12-Feb-19 04:06 AM] blackjok3r#3181
some saw a notarization/block and otehrs didnt

[12-Feb-19 04:06 AM] blackjok3r#3181
the internet is not instant

[12-Feb-19 04:06 AM] blackjok3r#3181
it takes a while to traves around the planet

[12-Feb-19 04:07 AM] blackjok3r#3181
if you did this all on local VMs

[12-Feb-19 04:07 AM] blackjok3r#3181
with 1ms ping

[12-Feb-19 04:07 AM] blackjok3r#3181
it would never fork

[12-Feb-19 04:07 AM] Alright#0419
are the consensus rules relating to this reliant on all nodes seeing notarizations at the same time?

[12-Feb-19 04:07 AM] blackjok3r#3181
the po9int being ... dont use a chain that can be 100% attack and try this again... if it still fucks up ... then pack up and go home boiys we failed

[12-Feb-19 04:08 AM] blackjok3r#3181
Kind of and kind of not...

[12-Feb-19 04:08 AM] Alright#0419
I will try it on another chain, just have to redesign the attack a bit

[12-Feb-19 04:08 AM] Alright#0419
why is fresh sync failing?

[12-Feb-19 04:08 AM] blackjok3r#3181
becasue you mined an invalid block

[12-Feb-19 04:08 AM] blackjok3r#3181
and nodes accepted it..

[12-Feb-19 04:09 AM] blackjok3r#3181
becase they saw your oprphaned blocks

[12-Feb-19 04:09 AM] Alright#0419
so.....?

[12-Feb-19 04:09 AM] blackjok3r#3181
it can only happen,m if there is like 3 maybe 4 notarizations in mempool I think

[12-Feb-19 04:09 AM] Alright#0419
there was only 1

[12-Feb-19 04:09 AM] blackjok3r#3181
let me look at the block...

[12-Feb-19 04:09 AM] blackjok3r#3181
there is 3 tx in it

[12-Feb-19 04:10 AM] blackjok3r#3181
maybe a bug ?

[12-Feb-19 04:10 AM] Alright#0419
is it rejecting 63 or 64?

[12-Feb-19 04:11 AM] blackjok3r#3181
4964... it has a coinbase ... but its rejecting saying notarisation isnt in position 1... im looking at it now

[12-Feb-19 04:13 AM] blackjok3r#3181
yep 2 notarizations in one block

[12-Feb-19 04:13 AM] blackjok3r#3181
I think the fix for this to make it never mien blocks with 2 notarisaions... doesnt seem too bad

[12-Feb-19 04:13 AM] blackjok3r#3181
becasu they can only happen every 5 blocks

[12-Feb-19 04:13 AM] blackjok3r#3181
so after a back log it will just include 1 each block until they clear out

[12-Feb-19 04:13 AM] blackjok3r#3181
its not like on a pos % chain,. you can dos it for very long

[12-Feb-19 04:14 AM] Alright#0419
the dos isn't really all that much of a problem as it's very very hard to accomplish on a chain with POS

[12-Feb-19 04:14 AM] Alright#0419
but

[12-Feb-19 04:14 AM] blackjok3r#3181
if we end up witha chain that cannot sync... that is very bad.. .weather it got dossed or not

[12-Feb-19 04:14 AM] Alright#0419
I just completely feked the network by doing it for like 10 blocks

[12-Feb-19 04:14 AM] Alright#0419
yes

[12-Feb-19 04:15 AM] blackjok3r#3181
so I need to just change it so that only 1 norisation can be ina  block... but that means notaries can create fake ones and back it up... but notaris have to do it.. whcih I dont think they will

[12-Feb-19 04:15 AM] blackjok3r#3181
makes no sense for them to do so, as it stops them being paid

[12-Feb-19 04:16 AM] Alright#0419
so TRE is deded, yes?

[12-Feb-19 04:16 AM] blackjok3r#3181
it doesnt sync .. so unless all nodes resync to the invalid block them start mining it...

[12-Feb-19 04:16 AM] Alright#0419
the fix for this won't allow that block to be accepted, yes?

[12-Feb-19 04:16 AM] Alright#0419
if yes, it's deded and I'll remove it

[12-Feb-19 04:17 AM] blackjok3r#3181
you wont be able to mine it

