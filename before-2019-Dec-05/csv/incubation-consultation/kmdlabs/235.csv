AuthorID;Author;Date;Content;Attachments;Reactions;
"232679450301431808";"blackjok3r#3181";"22-Jan-19 05:45 AM";"I give up battleing with this, and I am changin the algo... It has no adjustment for PoS % difficulty when its under, so I am adding this in. Seems the only solution.";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 07:19 AM";"you might want to revert that komodo_defs.h ""fix"" as it doesnt work at all.";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 07:20 AM";"movint ALL the extern just make it complain about 100 errors";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 07:20 AM";"Need to manually go through each global and made sure they are declared properly";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 07:33 AM";"I ahve already fixed most of them in our version.";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 07:33 AM";"Litterally cannot merge FSM down anymore";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:27 AM";"i fixed all the errors I was getting";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:27 AM";"what errors? mostly just making all the arg sizes match";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:28 AM";"we have more globals it went toally insane at me";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:28 AM";"I couldnt merge it";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:28 AM";"oh, maybe it is only in jl777 and i didnt push to FSM";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:28 AM";"maybe I need to merge to master then merge this branch to it";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:29 AM";"99% of them are fine, its just a few that verus added that seem wrong";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:29 AM";"i did get a lot of errors that is why it took an hour to get them all sorted";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:29 AM";"it sounds like you didnt get all the changes";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:30 AM";"I will leave it for now, and ry to merge it from FSM to a fork of our master, then sort out this when I merge it down, if I can ever get it working properly.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:30 AM";"for PoS64 we might need a timestamp based calc of the <100 block PoS percentage";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:30 AM";"Nearly worked out this staker too... It needs the PoS% in the stakeing loop and increase coinage depending on PoS %..";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:30 AM";"that would keep it compatible";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:31 AM";"I already got that working... its just the amount to vary the PoS difficulty that is a biut hard.";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:31 AM";"I think also I need to change the PoW to mine all of its blocs 57s into the future";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:32 AM";"it might make testing this easier, as every second block has a -ve blcoktime atm";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:32 AM";"High hash rate PoW has teh opposite problem we see on equihash";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:32 AM";"the PoW % stays right, but every block it mines is 1s";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:33 AM";"because the staker isnt mining blocks fast enough to increase chain diff";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:33 AM";"maybe the PoW diff needs to be increased a lot more for verushash";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:33 AM";"just by a fixed amount all the time";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:33 AM";"100x";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:35 AM";"I';m not sure that will work... increaing the min diff works kind of... but then the staker is having problems finding blocks";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:35 AM";"All you need to make it do, is make the staker mine blocks as fast as PoW then teh diff will just adjust until they both make 60s blocks";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:37 AM";"why would increasing PoW diff affect staker at all?";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:38 AM";"the PoW diff calc takes the current diff, PoS % and calculates a PoW diff. the staking doesnt change regardless of PoW diff";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:39 AM";"the base min diff affects the stakers ratio.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:39 AM";"maybe the PoW diff needs to be increased a lot more for verushash";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:39 AM";"So far the best I got ti to work, was by using a high min diff for the staker then PoW ... then it staked with -ve difficulty until that diff was reached... and it ewas somewhat stable";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:39 AM";"that is what i said, NOT mindiff";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:40 AM";"komodo_PoWtarget()";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:41 AM";"that returns the PoW diff that needs to be solved. it can be 100000x more difficult than current diff, still PoS will perform the identical calcs on the PoS side";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:41 AM";"just at the end where it does return(bnTarget) -> if ( algo == verushash ) return(bnTarget / arith_uint256(100));";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:41 AM";"The problem is that average PoW never increases far engouh because the staker take too long to mine blocks. Increasing the base MIN diff of verushash helps somwhat.";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:42 AM";"I tried to do that once already";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:42 AM";"didnt work";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:42 AM";"what happened?";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:42 AM";"nothing";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"PoW diff wasnt adjusted?";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"or PoW blocks came in very fast anyway";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"maybe 100 -> 100000";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"at some value you can make the PoW take > 60 sec";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:43 AM";"nto sure... but with 1 core here, you need to add an extra two 00's to the MIN diff to stop it mining 1s blocks, and even then maybe 3 0's are needed.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"then mult by 100000";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"or 10000";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:43 AM";"or 50000";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:44 AM";"just something to get it to be about 60+ seconds";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:44 AM";"then as more utxo for staking, the staking speed will increase and overall diff will adjust";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:47 AM";"the main reason for this is the ai porposed 20,000 LABS coins needed per chain, and everyone said it was too much... Making it work with 10,00 is almost impossible its just not enough.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:50 AM";"staking with 20000 is indeed very few coins and at first blocks will be quite slow from PoS side";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:51 AM";"but if PoW isnt taking 60 sec at the starting diff using one core, it becomes even harder. so first step is to calibrate the PoW to take approx 60 sec at one core using mindiff";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:51 AM";"what PoS % you want to achieve with 20,000 coins?";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:51 AM";"Yes thats what I am doing now... I also made a whay for when PoS is under its target it can increse `coinage`";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:52 AM";"20,000 worked quite well at 50/50  ... 10,000 at 60/40 isnt playing nice.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:52 AM";"increase the PoW diff until it works";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 08:52 AM";"If they want lower amoutns of coins, the PoS % will need to be lowered to adjust it";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 08:52 AM";"i think with the other tweaks you did, that is the missing link now";"";"ðŸ¤ž (1)";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:00 AM";"if you increased MINDIFF that would make staking harder";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:00 AM";"if you just increased PoW diff, that would slow down verus hashing and not affect PoS";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:01 AM";"not sure why that just didnt work, but i only remember testing 100,000+ coins staking (even millions)";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:01 AM";"Yes its not really working with very low amounts";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:01 AM";"Like I can get it close";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:02 AM";"it might need some sort of earlier N*N time trigger instead of the 400 seconds or whatever it is now";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:03 AM";"```mindiff.SetCompact(STAKING_MIN_DIFF,&fNegative,&fOverflow);
    ratio = (mindiff / bnTarget);```
So your saying that this ratio doesnt tneed the actual mindiff for VerusHash ? it can just be Komodo_Min_diff ... this was the entire problemain the first place, I found setting the actual mindiff here lewt it actually find blocks... Just that the min diff still wasnt high enough";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:03 AM";"is it really so bad that blocks are slower at first? or does it never adjust due to not solving the mindiff";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:03 AM";"it never adjusts";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:04 AM";"```if ( ASSETCHAINS_ALGO == ASSETCHAINS_VERUSHASH || ASSETCHAINS_ALGO == ASSETCHAINS_VERUSHASHV2 )
        {
            if ( PoSperc < ASSETCHAINS_STAKED )
            {
                // This means we are under PoS % required and we need some extra help getting an elegible utxo. 
                // Likley there is some math required here to make it work properly. But getting the data here is no1 priority.
                //coinage = coinage * 1000;
                if ( blocktime+iter+segid*2 > prevtime+70 )
                    coinage *= ((blocktime+iter+segid*2) - (prevtime+60));
            }
        }```
I am tersting this atm, with a higher MINDIFF.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:05 AM";"PoW diff calc does NOT affect staking";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:05 AM";"the mindiff for staking is in komodo_stake() KOMODO_MINDIFF_NBITS";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:05 AM";"yes but its using a ratio of the block diff...";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:05 AM";"if you didnt change that, then maybe it needs to be made easier for staking";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:06 AM";"the issue here is twofold";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:06 AM";"I changed it to uset the min diff for the algo being used";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:06 AM";"if that makes it too hard, then why not set it to what it was before";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:06 AM";"because that made it even herder";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:06 AM";"it needed coinage = coinage * coinage";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:07 AM";"then this is tuned for small coinsupply and wont work well with bigger coin supplies";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:07 AM";"that is an extreme change";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:07 AM";"the PoW uses KOMODO_MINDIFF_NBITS for PoS blocks";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:07 AM";"yes";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:08 AM";"which is pretty easy diff to solve, but might be too hard for 10,000 coins at first";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:08 AM";"But the staking difficulty ratio  has to use  the actual MINDIFF";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:08 AM";"or it just cant find anything";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:08 AM";"that doesnt make sense. KOMODO mindiff is much easier than verus mindiff";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:08 AM";"like 100000 times or something";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:08 AM";"there is a bug there";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:09 AM";"maybe some sort of overflow";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:09 AM";"then set the staking mindiff to be 1000x";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:09 AM";"that gains a relative 100x";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:11 AM";"this chain so far seems to be working OK... will let it run a few hours and see, then try to just increase PoW only by 1000x  if  tis ends up broken.";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:11 AM";"Guess I should start another one with lots of coins. But early testing that made 0 diffrence .. 50,000 or 1 million was doing the same things.";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:12 AM";"verushash being 100000x faster than equihash was the main issue";"";"";
"455741312273219595";"jl777c#5810";"22-Jan-19 09:12 AM";"but staking diff being too hard even at mindiff, is the other issue. maybe calibrate that independently with a 100% PoS chain?";"";"";
"232679450301431808";"blackjok3r#3181";"22-Jan-19 09:13 AM";"I attmepted that, but I was playing with `coinage` to adjust it not the difficulty.";"";"";
