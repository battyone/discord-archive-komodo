AuthorID;Author;Date;Content;Attachments;Reactions;
"405011811511828481";"Alright#0419";"19-Mar-19 02:42 AM";"if we can't find an absolute method for calculating this, we could set an arbitrary limit to hex data for non-fungible tokens";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:43 AM";"yes my point is that if you use 10kb of hex in the tokencreate command, OP_RETURN will be >10001";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:43 AM";"it will try to make it >10001 and fail that is";"";"";
"507209916449292303";"dimxy#2587";"19-Mar-19 02:43 AM";"and you just would receive an error when the tx is validated";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:44 AM";"when testing import migrateions. I had very strang errors occur when there were around 50+ vins";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:44 AM";"the migrate adds extra data as well";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:44 AM";"I assumed it was because of size... buut it could be another issue";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:44 AM";"so you may be able to create an 9kb non-fungible token, but unable to migrate it";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:44 AM";"Migrate adds data AFTER the burn has been sent... this is the problem";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:45 AM";"we need to work out what this is";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:45 AM";"to limit the burn tx size to account for this";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:46 AM";"yea that seems a good solution if you think that will work";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:47 AM";"just check burn tx prior to burning";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:47 AM";"well as long as that is what caused the error on import that is";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:47 AM";"see if the import would be >10001";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:47 AM";"and fail it";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:47 AM";"don't burn them";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:47 AM";"It was weird, as I would expect it to say ""tx too alrge"" but instead it said ""vins -ve""";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:47 AM";"the hell is ""vins -ve""";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:47 AM";"that's not a typo?";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:48 AM";"vins are negative";"";"";
"507209916449292303";"dimxy#2587";"19-Mar-19 02:48 AM";"I think we may issue a recomendation to limit non-fungible data if you want to migrate your tokens";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:49 AM";"the MoM hash and MoMoM hash are an exact defined size so we can calculate what data is added after the burn. Im just not exactly sure how to do that";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:51 AM";"Sorry the exact error the large txn gave was this: `if (txout.nValue < 0)
            return state.DoS(100, error(""CheckTransaction(): txout.nValue negative""),
                             REJECT_INVALID, ""bad-txns-vout-negative"");`";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:51 AM";"decoderawtransaction though showed that it was indeed positive";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:58 AM";"could have also been this:
```if ( txout.scriptPubKey.size() > IGUANA_MAXSCRIPTSIZE )
            return state.DoS(100, error(""CheckTransaction(): txout.scriptPubKey.size() too big""),REJECT_INVALID, ""bad-txns-vout-negative"");```";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:58 AM";"seems an overflow";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:58 AM";"if changing non-fungible data is affecting the amounts in a vout, something is wrong";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:59 AM";"no, this was in particilar, adding too many vins to a burn tx making ius very large... I assumed it was the tx size that caused it";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:59 AM";"but maybe its not? 
what is: `IGUANA_MAXSCRIPTSIZE`";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:59 AM";"op_return size limit";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 02:59 AM";"and how does a script pubkey end up too big?";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 02:59 AM";"with a funny name";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:00 AM";"ah ha.... so OP_RETURN limit has beeen breached, but the error doesnt say that";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:00 AM";"😃";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:00 AM";"it's the script size limit to be specific";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:00 AM";"any script, not just OP_RETURNs";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:00 AM";"so my theory is correct. Yes I get that, btu I doubt any other script would breach that limit apart from OP_RETURN...";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:01 AM";"it seems to me that an oversized OP_RETURN is overflowing into changing the vout values";"";"";
"507209916449292303";"dimxy#2587";"19-Mar-19 03:01 AM";"we may limit vins number for burn tx's";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:01 AM";"and this is checked first";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:01 AM";"so a burn tx needs to be limited in total size, iun such a way that:
`burntx + nonfungibledata < IGUANA_MAXSCRIPTSIZE-MoMoM-MoM signing`";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:02 AM";"yep";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:02 AM";"script < IGUANA_MAXSCRIPTSIZE to simplify it :troll:";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:02 AM";"no";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:02 AM";"OH";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:02 AM";"because MoM and MoMoM are added";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:02 AM";"later on";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:02 AM";"yes I understand";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:02 AM";"on source chain, it needs to be smaller";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:02 AM";"yes";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:03 AM";"so it can be <10000 on target";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:03 AM";"Would that be something you can do? you  need to work out a constant sizew that is iadded to every import";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:03 AM";"I would assume tis the exact same size for every one";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:03 AM";"sure";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:03 AM";"should be pretty easy";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:03 AM";"coins or token should make 0 diffrence";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:03 AM";"look for  E_MARSHALL";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:03 AM";"and see what it's putting in there";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:04 AM";"see max size for each";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:04 AM";"as its only createimport on source chain, and complete import on KMD that adds any data...";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:04 AM";"once we know how much maximum data those steps can add, the limit is easily defined";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:04 AM";"ok, I'll check it out";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:05 AM";"cheers thanks. btw I think we can do these chains. Maybe we can keep the 3/4 for now";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:05 AM";"just dont do any migrates ont ehm until everyon is updated";"";"";
"507209916449292303";"dimxy#2587";"19-Mar-19 03:05 AM";"👌";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:05 AM";"that at least allows testing of the backwards compatability";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:05 AM";"add 2 more chains that we can test on, once notarizations start";"";"";
"412482228359266328";"CrisF#3405";"19-Mar-19 03:07 AM";"Any (approx) idea when new chains?  On battery for a while.  Will check in around expected time, if any.";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:08 AM";"just testing the build of master right now. seems fine. Going to merge FSM down though aswell along with new equihash params, maybe a few hours?";"";"";
"412482228359266328";"CrisF#3405";"19-Mar-19 03:09 AM";"Ok, will check back in a few.  Maybe have an adapter by then.";"";"👍 (1)";
"412482228359266328";"CrisF#3405";"19-Mar-19 03:09 AM";"Thx";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:12 AM";"https://github.com/KMDLabs/komodo/blob/f4b1829a52ac7fde736959afba6bc3da5c9a7964/src/crosschain.cpp#L264
found where it marshals it 😅";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:12 AM";"@blackjok3r where am I looking for where it builds burn txs";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:13 AM";"what is the rpc command for a burn tx?";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:13 AM";"migrate_createburntransaction";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:13 AM";"is the new RPC";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:13 AM";"to create a brun";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:13 AM";"guess that gives you the size of the burn, and you can just compare it to the size of a compelte import tx... do that a few times and see if its always the same";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:15 AM";"can I do burns on CFEKDIMXY right now with latest without forking them?";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:15 AM";"don't actually need to do the imports, just the burns";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:15 AM";"just use an old burn";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:15 AM";"one sec";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:16 AM";"```{""dest_chain"": ""CFEKDIMXY4"", ""src_chain"": ""CFEKDIMXY3"", ""payouts"": ""010084d717000000001976a9140012373820fb7d53e44e79e9924474136accd07e88ac"", ""src_txid"": ""1873607ed03cf443db3a1134cbb99118c7be98ab9c7c23eee58ec3b8f094ce44"", ""src_hex"": ""0400008085202f89015f6570129fa90a6d013d9795afbf073239d72c22763de5adff14acd3043b0dd000000000484730440220264892735134009d042ea8279a468440f6ff84bfc097a7e389845fe10a0eadfa02207614c0d5e83e62acc26a1eee1e735793f9ad70ed9b0674ba5164674dfe23d48801ffffffff02b008fec40100000023210318f3efdfc9dac4c2e661745d96ed515f093f759eea807703117f7e667df34dfdac0084d717000000003a6a38807b0a4346454b44494d5859348844b1225a04c022d8c3d1d6a187c1817e4b647e8a7ba583230ae3a32d0a400a0a4346454b44494d58593300000000811b00000000000000000000000000""}```";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:16 AM";"thats a burn tx";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:16 AM";"you can then do createimport, on the source";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:16 AM";"then complete import on KMD";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:16 AM";"and compare the sizes";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:16 AM";"this is the script exactly? `0400008085202f89015f6570129fa90a6d013d9795afbf073239d72c22763de5adff14acd3043b0dd000000000484730440220264892735134009d042ea8279a468440f6ff84bfc097a7e389845fe10a0eadfa02207614c0d5e83e62acc26a1eee1e735793f9ad70ed9b0674ba5164674dfe23d48801ffffffff02b008fec40100000023210318f3efdfc9dac4c2e661745d96ed515f093f759eea807703117f7e667df34dfdac0084d717000000003a6a38807b0a4346454b44494d5859348844b1225a04c022d8c3d1d6a187c1817e4b647e8a7ba583230ae3a32d0a400a0a4346454b44494d58593300000000811b00000000000000000000000000`";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:16 AM";"this is shown as `""hex""` field if you do getrawtx?";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:16 AM";"yes thats the send burn hex";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:16 AM";"oh this is the full tx hex?";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:17 AM";"that works";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:17 AM";"the burn tx yes";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:17 AM";"```{""dest_chain"": ""CFEKDIMXY4"", ""src_chain"": ""CFEKDIMXY3"", ""payouts"": ""010084d717000000001976a9140012373820fb7d53e44e79e9924474136accd07e88ac"", ""src_txid"": ""7e0d2a0d074be83ca9f3357646d18f543da3060d5f2905742875e194453daecd"", ""src_hex"": ""0400008085202f8901a2cd86cc2d66393dc0da1d7fe8a9889f269cdcc6acbd67c0fd5584afb73418cc000000004948304502210092ff56bcc733216fc7035c1a3792309b6ecf5579adc8db0a1dca8b90f1e8bda8022045a645aa8d08b5b24949234cfaf866dcd109b5f6b3888025d58c113f2020cfd301ffffffff0210035d240200000023210318f3efdfc9dac4c2e661745d96ed515f093f759eea807703117f7e667df34dfdac0084d717000000003a6a38807b0a4346454b44494d5859348844b1225a04c022d8c3d1d6a187c1817e4b647e8a7ba583230ae3a32d0a400a0a4346454b44494d58593300000000801b00000000000000000000000000""}
```";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:17 AM";"I have litteral thousands of them if you need. no need to create new ones I dont think... that will take time";"";"";
"405011811511828481";"Alright#0419";"19-Mar-19 03:21 AM";"https://github.com/KMDLabs/komodo/blob/f4b1829a52ac7fde736959afba6bc3da5c9a7964/src/importcoin.cpp#L99";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:22 AM";"that will give you the exact hex I just posted, its the 2 steps after that we need to know";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:22 AM";"but maybe it changed  now";"";"";
"232679450301431808";"blackjok3r#3181";"19-Mar-19 03:22 AM";"with the new burn format?";"";"";
