AuthorID;Author;Date;Content;Attachments;Reactions;
"412482228359266328";"CrisF#3405";"28-Nov-18 07:59 AM";"Has migrate from `*` to `DUCKS` been disabled in any way?";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:02 AM";"If not I also had 2 failed migrates at the start in that direction.  Rushing to get things done and assumed it was intentional, moved on and forgot.";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:02 AM";"DUCKS is a differnt cluster";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:03 AM";"you cant migrate to it";"";"🦆 (1)";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:03 AM";"103";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:03 AM";"Ahh, that's why.";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:03 AM";"smk added a change to his TUI script to stop ppl migrating to it., but I guess you guys are using my old one, or some other version";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:04 AM";"I hadn't seen that error before.
@Bar_F1sh_Rel message jogged my memory.";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:04 AM";"Yes, that was right at the start before the new script was out.";"";"";
"323462995571245057";"Bar_F1sh_Rel#0834";"28-Nov-18 08:05 AM";"I need to refresh all my scripts - and is staked repo = notary repo for komodod?";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:05 AM";"komodo comes from StakedChain/komodo";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:05 AM";"they are both the same, as they just pull that repo and build it";"";"";
"323462995571245057";"Bar_F1sh_Rel#0834";"28-Nov-18 08:06 AM";"Cool - not that then";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:06 AM";"we need to merging in sapling... I hjave a few long days coming up, as we use KMD, we need sapling before the hardfork... I wanted to avoid doign that... but we have no choice now";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:07 AM";"Will probably make a wholoe new org on git caklled KMDLabs and redo a heap of stuff 😦";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:07 AM";"That's a big job man!";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:08 AM";"Worth the effort in the end though.";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:08 AM";"No real rush, right?";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:08 AM";"(don't kill yourself with lack of sleep over this I mean😃 )";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:09 AM";"nar ive had a few good days of rest... .and have lots of new stuff to help speed things up... no longer working off 15"" laptop lol";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:10 AM";"haha, big improvement.";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:11 AM";"I'll start on my big job when this reboot is finished.";"";"";
"412482228359266328";"CrisF#3405";"28-Nov-18 08:11 AM";"Will be more than a few days in my case, due to speed issues, haha.";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:20 AM";"@CrisF  Please update all staking/minign nodes to latest master";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 08:21 AM";"and plese ping me if anything locks up again";"";"👍 (1)";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 01:42 PM";"Currently testing something.. please dont update anything at the moment ... I realised the check that makes notarisations top priorty is horribly inneficiant... figured out fix to amke it a lot faster. just need to get ti working lol.";"";"👌 (1)";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 01:52 PM";"LOL not only was it slowing thigs down, it aso wasn't working at minsigs =5";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:15 PM";"we need to increase min sigs";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:15 PM";"@Alright";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:15 PM";"Something still isnt right here";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:17 PM";"```000d1d4ea689ebe59da63a91af8e1fe8fc385cc2274215bb88d2684f79156119 mined CFEKLF block 30446!
Notarisation.c0ebcf35ecd825abfb88a711bbfa04dc7d5e8bfd6796f15fee5dcdfb597cd8d6 set to maximum priority.
ERA.(2)
minsigs.5 era.2 authsize.25
seennotary.0
seennotary.2
seennotary.5
seennotary.13
seennotary.21
Authorised notarisation data for CFEKLF
Added notarisation data for CFEKLF
```
However the dpow notarisation detection never kciked in here";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:17 PM";"There is definatly only 1 notarisaion in this block, so both of them should have detected and activated here...";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:18 PM";"wait ..";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:18 PM";"maybe they are out of order";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:19 PM";"@jl777c  can you point me to where your notarisations code rejects notarisaions that were picked up out of order and rejects them?
I would like to add this to libscotts code aswell, so that its 100% that both notarisation DB are the same, as the MoM depth is taken from dPoW but the MoMoM hash is in libscotts DB, and I am sure that with a mismatch there can be a chance of a faliure.";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:20 PM";"while small, it is happening, as we are getting fails on migtrates again. under perect conditions they work great, but start getting in consistent block times and its plays up.";"";"";
"455741312273219595";"jl777c#5810";"28-Nov-18 02:22 PM";"void komodo_notarized_update(struct komodo_state *sp,int32_t nHeight,int32_t notarized_height,uint256 notarized_hash,uint256 notarized_desttxid,uint256 MoM,int32_t MoMdepth)
{
    struct notarized_checkpoint *np;
    if ( notarized_height >= nHeight )
    {
        fprintf(stderr,""komodo_notarized_update REJECT notarized_height %d > %d nHeight\n"",notarized_height,nHeight);
        return;
    }";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 02:31 PM";"Thanks 😄";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:07 PM";"wait im not sure that is it 😦";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:26 PM";"I figured out a way to do it... But I dont think its optimal (neither is it a permenant fix for all chains)";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:27 PM";"Instead of adding the notarisations inside ConnectBlock in main.cpp for staked chains,
I can just add every chain that is not a staked chain there. 
and then move the call to that function to inside `komodo.h`, specifically where the notarisation is already validdated by dPoW";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:28 PM";"This means that notrisations that are valid by dPoW are added to libscotts DB";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:28 PM";"however that block is skipped by his DB if, the notarisation inside it is invalid... need to sleep on this,a s there is likely a better solution";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:29 PM";"I am not sure why he didnt just do this in the first place";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:29 PM";"maybe compile issues ... although I solved those and can add anything I liek to komodo*.h files";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:29 PM";"Needed a `#ifdef` and make file flag  to exclude things from`bitcoin-cli.o`";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:49 PM";"Had another look at this before sleeping ... the way his function works is a bit silly ... and scans everythig in a block... while for the target this is probably fine, in the source its not right... So i will create another function that takes the validated notarisation as a whole tx, and just adds it to the DB.
This should make it so that the dPoW database matches exactly with the MoMoM data base ... and then maybe even the sledgehammer code fix cna be reveresed, and every MoMoM willl then be in order.";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:51 PM";"The fact that this was working at all is astounding .. and likely only did so, because every notarisation is added to his DB valid or not, and it had multiple copies of the same MoMoM's";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 03:53 PM";"What I dont understand is how a valid notarisaion with min sigs5 is not a valid notarisaion by the dPoW code";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 04:02 PM";"basically need to totally change how the whole thing works ... This might be a fucking mission";"";"";
"232679450301431808";"blackjok3r#3181";"28-Nov-18 04:02 PM";"😦";"";"";
"455741312273219595";"jl777c#5810";"28-Nov-18 04:11 PM";"i think if it is mostly working now, be careful before making wholesale changes";"";"abusedsmily (2)";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 12:21 AM";"Yes I contacted libscott, mostly working is not working though";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 12:22 AM";"Before I do anything drastic I will do some more tests, just getting really annoyed doing the same things over and over and have something test working then break with no code changes";"";"";
"412482228359266328";"CrisF#3405";"29-Nov-18 01:40 AM";"Is it only a single reported failure atm?";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:41 AM";"Yes, but one is too many";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:41 AM";"unrecoverable migrate failure is completely unacceptable";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:42 AM";"imagine sending KMD and it having some (small)chance of being burned instead";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:43 AM";"Think we know why";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:43 AM";"or well joker has a theory at least";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:43 AM";"need some people to update in a bit";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:43 AM";"the code is pushed... just testing it";"";"";
"412482228359266328";"CrisF#3405";"29-Nov-18 01:43 AM";"I also think it's too many. Real $ are $$";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:44 AM";"hopefully this is all it is";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:44 AM";"redoing the notariations DB is kind of crazy ... but if we have to do that, we have to do it";"";"";
"412482228359266328";"CrisF#3405";"29-Nov-18 01:44 AM";"Wondering if any other reports.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:44 AM";"bar fish has 2 both on LF";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:45 AM";"after this change I will get some huge loops happening";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:45 AM";"with proper logs";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:45 AM";"its possible that his setup has some corruption issue";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:45 AM";"but ulikely";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:46 AM";"I have the raw hexes ... to check on other nodes.. but never go there yesteray as a-team broke totally after sapling update somehow and I am only now able to get it running again";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:48 AM";"However having the notarisations DBs not matching has other issues .. even if migrates are working.";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:48 AM";"can you send me anything you have for them";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:48 AM";"yes";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:48 AM";"soon";"";"";
"405011811511828481";"Alright#0419";"29-Nov-18 01:48 AM";"nothing look weird about the actual txs?";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:48 AM";"doing a bunch fo things at once";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:48 AM";"I havent looked yet";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:49 AM";"while fixing something else ... I noticed that there are notarisations that are not out of order that are being skipped by dPoW but added by MoMoM";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:49 AM";"this is mostllikely where the issue lies at a very low level";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:49 AM";"but it can still mostly work with this condition, as it means there is just multiple copies of the same data";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:50 AM";"but before, it couldnt find the right ones ... with sledgehammer it *should* always find the MoMoM";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:50 AM";"unless its been sent by iguana on every node... and then orphaned by the netowrk.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:50 AM";"which I have never seen happen anywayer at all";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:51 AM";"but is possible";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:54 AM";"https://i.imgur.com/JQllbOJ.png";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:54 AM";"This is what I mean";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:54 AM";"thats 4 notarisations in a row, that are not recognised by jl's dPoW code on LF";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:54 AM";"but are added to the MoMoM DB .";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:55 AM";"hopefully this i just a minsigs issue .. as the `<<<<<< notarised` isnt even happening here...";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:55 AM";"and all thats checking is, the exact same thing as libscotts and that is there are 5 sigs of valid notries.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:56 AM";"My guess is its looking for 6 some random % of the time.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:56 AM";"so increaseing to 6 might fix it.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 01:56 AM";"The other option is to let jls code check the notarisation, and ONLY add theTX to the MoMoM DB IF his code has already validated it.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 07:23 AM";"@CrisF all my miners and stakers seems fixed since the update.";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 07:23 AM";"If yours are also OK ...  we have a mandatory update ready.";"";"";
"412482228359266328";"CrisF#3405";"29-Nov-18 07:28 AM";"I'll check in an hour or so.";"";"";
"423176312354635779";"gcharang#6833";"29-Nov-18 07:29 AM";"Do we need to update?";"";"";
"232679450301431808";"blackjok3r#3181";"29-Nov-18 07:29 AM";"You can update now, but you wont notarise until 5 others have... Its better to get people updateed though";"";"";
