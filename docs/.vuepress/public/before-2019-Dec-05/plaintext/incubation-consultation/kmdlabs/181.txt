==============================================================
Guild: Komodo
Channel: kmdlabs
Topic: Please read pinned messages
Messages: 100
Range: before 05-Dec-19 12:00 AM
==============================================================

[02-Jan-19 11:17 AM] CrisF#3405
The current Oracles project has 2 parts.

[02-Jan-19 11:18 AM] CrisF#3405
A. Migration logging - immediate

[02-Jan-19 11:18 AM] CrisF#3405
B. Statistics logging - follow-on / on-going

[02-Jan-19 11:21 AM] CrisF#3405
A. will create a logging tool for projects testing in Labs and be used/tested for Migration Stress Test.

[02-Jan-19 11:23 AM] smk762 -  dracocanis ominator#7640
afaik, most of the chains are oracleable

[02-Jan-19 11:23 AM] CrisF#3405
B. Will provide general stats on the cluster and it's parts.  This will provide a template for stat collection if all goes well.

[02-Jan-19 11:23 AM] smk762 -  dracocanis ominator#7640
cfek has the most oracles tho by a long margin

[02-Jan-19 11:23 AM] smk762 -  dracocanis ominator#7640
some troolbox, some throwaway, and lots of dragonhound

[02-Jan-19 11:24 AM] CrisF#3405
@Mylo , you want to view the oracle data, right?

[02-Jan-19 11:24 AM] CrisF#3405
I'm wondering how to view it also.

[02-Jan-19 11:25 AM] smk762 -  dracocanis ominator#7640
veiwing is simpler than recording, but we have bash and python that does it all

[02-Jan-19 11:26 AM] smk762 -  dracocanis ominator#7640
dragonhound is stored as an encypted string, so not a good test case for simple viewing

[02-Jan-19 11:32 AM] smk762 -  dracocanis ominator#7640
here's the spammer, has complete write flow and functions in single script - https://github.com/smk762/kmd_pulp/blob/master/kmd_labs/oracles/spam_oracle.py

{Embed}
https://github.com/smk762/kmd_pulp/blob/master/kmd_labs/oracles/spam_oracle.py
smk762/kmd_pulp
random assortment of small scripts for use in the Komodo ecosystem - smk762/kmd_pulp
https://avatars3.githubusercontent.com/u/35845239?s=400&v=4

[02-Jan-19 11:32 AM] smk762 -  dracocanis ominator#7640
change some stuff to sys.argv and you can make it dynamic for chain / oracletxid / message

[02-Jan-19 11:34 AM] smk762 -  dracocanis ominator#7640
This one will read the data - https://github.com/smk762/kmd_pulp/blob/master/kmd_labs/oracles/read_gps.py

{Embed}
https://github.com/smk762/kmd_pulp/blob/master/kmd_labs/oracles/read_gps.py
smk762/kmd_pulp
random assortment of small scripts for use in the Komodo ecosystem - smk762/kmd_pulp
https://avatars3.githubusercontent.com/u/35845239?s=400&v=4

[02-Jan-19 11:35 AM] smk762 -  dracocanis ominator#7640
it defines the oracletxid in an external file, and you can take out the encryption stuff.

[02-Jan-19 11:36 AM] smk762 -  dracocanis ominator#7640
eventually I"ll simplify it to barebones with sys.argv params for the people

[02-Jan-19 11:37 AM] CrisF#3405
Thanks!  Had a look.  Hopefully Mylo understands  it better than I (no doubt he does) , haha.

[02-Jan-19 11:38 AM] smk762 -  dracocanis ominator#7640
in the same repo, there'sa script called `select_oracle.py` which displays all oracles by name and txid in console

[02-Jan-19 11:38 AM] CrisF#3405
I'll need to look through the basics of oracles.

[02-Jan-19 11:38 AM] CrisF#3405
I'll start there.

[02-Jan-19 11:38 AM] smk762 -  dracocanis ominator#7640
the scripts above show the order of functions, but theres a bit of other stuff that isnt needed

[02-Jan-19 11:39 AM] smk762 -  dracocanis ominator#7640
cfek has 76 oracles (took a minute for the list to populate)

[02-Jan-19 11:40 AM] smk762 -  dracocanis ominator#7640
a new player has entered the arena...

[02-Jan-19 11:40 AM] smk762 -  dracocanis ominator#7640
`67 | CFEK         | Patreon-creator-1    | Weather in NYC                                     | 6d048262e4c9fd3211b720528f8b14f49340dd9f4f3d9210dcdc23c080e3cd1e
 68 | CFEK         | Patreon-creator-2    | Pewdiepie                                          | 69d28d9e2ff8946402bd5d8b277e340d38e966ffdbcd5b9a595bd9b00cbd9aa6
 69 | CFEK         | Patreon-creator-1-tier2 | Pewdiepie5                                         | c3917231a4b6a7b13ac7f60998c9bba1019470b9181edb550e7d893ac058c32c
 70 | CFEK         | Patreon-creator-1-tier1 | Pewdiepie                                          | 952609dd18323b5add3352b00a294b27a6810503717b3129f87a77416762e4bf
 71 | CFEK         | Patreon-creator-1-tier1 | Pewdiepie1                                         | 868c9372092abcc4e61a7cca31b669f5b5956f19a2c256c577e60baf0c36810d
 72 | CFEK         | Patreon-creator-1-tier3 | Pewdiepie10                                        | e6c84bfb24cc779b2afa98ee4c3d7ef9e46d2c4751e229c67394c9733c923ff0
`

[02-Jan-19 11:41 AM] smk762 -  dracocanis ominator#7640
the `<**username**> Dragonhound Track  History` ones are what's been generated by testing the dragonhound user signup pages etc.

[02-Jan-19 11:42 AM] smk762 -  dracocanis ominator#7640
about 50-60 of them are dragonhound oracles 😂

{Reactions}
1M 

[02-Jan-19 11:45 AM] CrisF#3405
Going to try it now.
Just noticed this on std on that node.  Not seen before.
@blackjok3r `unexpected null pwallet in RelayWalletTransaction` .  Haven't noticed this before.

[02-Jan-19 11:46 AM] CrisF#3405
On `LF` I think.

[02-Jan-19 11:47 AM] smk762 -  dracocanis ominator#7640
fair warning, half of the scripts in that folder wont work  100% out of the box

[02-Jan-19 11:47 AM] blackjok3r#3181
I have been tryiong to catch the actual cause of that error for a very long time... its harmless (although could be related to wallet corruption issues)

{Reactions}
👌 

[02-Jan-19 11:48 AM] smk762 -  dracocanis ominator#7640
cleaning up that repo has been on my list for weeks, but had plenty higher up to do

[02-Jan-19 11:50 AM] blackjok3r#3181
working on getmigrates RPC now .... man its going to be a fair bit of code... changed the idea already. 
`komodo-cli -ac_name=CFEK getmigrates imports <block hash>`
`komodo-cli -ac_name=CFEK getmigrates exports <block hash>`
This will return a JSON array with each tx as an object, inside this object will be the imported/exported value the opposite corrosponding txid. There will also return a total of all imports/exports added up. Is there anything else it might need?

[02-Jan-19 11:51 AM] smk762 -  dracocanis ominator#7640
I might reduce it to an unencrypted simple feed of kmd value on binance or something so there's a reference example.

{Reactions}
👌 (2) 

[02-Jan-19 11:51 AM] blackjok3r#3181
chain from/to  aswell I think...

{Reactions}
✅ 

[02-Jan-19 11:51 AM] smk762 -  dracocanis ominator#7640
address?

[02-Jan-19 11:51 AM] blackjok3r#3181
the address from/to ?

[02-Jan-19 11:52 AM] smk762 -  dracocanis ominator#7640
yeah. I know it's unprivacy, but it could be worked out by a motivated actor if they really wanted to know anways

[02-Jan-19 11:53 AM] blackjok3r#3181
yeah the info is already there, if you added an extra RPC call with the returned txid so we may as well just display it here

[02-Jan-19 11:53 AM] smk762 -  dracocanis ominator#7640
and for block explorers it might be something user wants to see

[02-Jan-19 11:53 AM] blackjok3r#3181
well I figure the code for this will be needed by updated cross chain block explorers, which is a long standing open job opn trello

[02-Jan-19 11:55 AM] CrisF#3405
Yeah, was wondering about privacy, too.  Would it be very useful to have the address?

[02-Jan-19 11:55 AM] smk762 -  dracocanis ominator#7640
I'ma resurect my ghost blog first, then I"ll add some cryptoconditions examples and walkthroughs

[02-Jan-19 11:56 AM] smk762 -  dracocanis ominator#7640
Taddr can be determined easy enough by looking at both chains and working backeards as supply changes. so no loss of privacy, just a more convenient path to exposure

[02-Jan-19 11:57 AM] smk762 -  dracocanis ominator#7640
ussual taddr protocols for psydoanon would apply, jumbler it if you have to?

[02-Jan-19 11:58 AM] blackjok3r#3181
we dont want to add too many extra thigns to this, the idea is to get the required info as fast as possible... I can always add more later. starting with the help sample output so I have an outline of whats needed... simply copying getblock provides most of the code, and the varios stuff is just added inside the tx loop 😃

[02-Jan-19 11:59 AM] CrisF#3405
The chains should  be useful for visualizing the flow of coins through the cluster, right?

[02-Jan-19 12:00 PM] smk762 -  dracocanis ominator#7640
address not critical for visualisation. more just a nice to have for block explorers

[02-Jan-19 12:00 PM] blackjok3r#3181
you can get a very  fast esitmation of current coin supply by goign gettxoutset RPC on each chain.

[02-Jan-19 12:01 PM] CrisF#3405
@smk762 -  dracocanis ominator Do I have to run `./select_oracle.py` from StakedNotary or am I missing something?

[02-Jan-19 12:03 PM] CrisF#3405
Yeah, I was thinking of the chain names.  Since gettxoutset makes the vis of flow of coins work it will be great.

[02-Jan-19 12:05 PM] CrisF#3405
Also, TonyL has offered to help with the TUI!
```Hi @CrisF I'm making a separate simple TUI for oracles (most of the functionality was implemented in gateways TUI, so just split things mostly) and want to add support of files upload/download (as binary) and text publish/read. If some automation of external data publishing on oracle needed - I'm glad to help and implement it in current TUI. I'm very sorry, but not understood from pad you've shared what actually needs to be implemented```

[02-Jan-19 12:06 PM] CrisF#3405
I'll summarize what we have on the pad.  Could you guys please have a look at it then?

[02-Jan-19 12:13 PM] smk762 -  dracocanis ominator#7640
select_oracle just lists them at the moment.

[02-Jan-19 12:13 PM] smk762 -  dracocanis ominator#7640
it used to let you slect one, and get x number of records from it

[02-Jan-19 12:13 PM] smk762 -  dracocanis ominator#7640
I hatcheded the code once adding encrytion

[02-Jan-19 12:13 PM] smk762 -  dracocanis ominator#7640
so now it exists after you select an oracle.

[02-Jan-19 12:14 PM] smk762 -  dracocanis ominator#7640
but it'll give you the oracle batontxid, which you can use in `oraclessamples` cli

{Reactions}
👌 

[02-Jan-19 12:16 PM] blackjok3r#3181
```            "\nResult:\n"
            "{\n"
            "  \"imports\" : [                  (json array)\n"
            "       \"transactionid\" : {       (json object)\n"
            "       \"import\" {                (json object)\n"
            "           \"value\" :             (numeric)\n"
            "           \"address\" :           (string)\n"
            "           \"chain\" :             (string)\n"
            "           }\n"
            "       \"export\" {                (json object)\n"
            "           \"txid\" :              (string)\n"
            "           \"value\" :             (numeric)\n"
            "           \"address\" :           (string)\n"
            "           \"chain\" :             (string)\n"
            "           }\n"
            "       }"
            "  ]\n"
            "  \"exports\" : [                  (json array)\n"
            "       \"transactionid\" : {       (json object)\n"
            "       \"export\" {                (json object)\n"
            "           \"value\" :             (numeric)\n"
            "           \"address\" :           (string)\n"
            "           \"chain\" :             (string)\n"
            "           }\n"
            "       }"
            "       \"import\" {                (json object)\n"
            "           \"value\" :             (numeric)\n"
            "           \"address\" :           (string)\n"
            "           \"chain\" :             (string)\n"
            "           }\n"
            "  ]...\n"
            "  \"TotalImported\" :             (numeric)\n"
            "  \"TotalExported\" :             (numeric)\n"
            "}\n"```

{Reactions}
🔥 (2) 

[02-Jan-19 12:16 PM] blackjok3r#3181
I think this is valid JSON...

[02-Jan-19 12:16 PM] blackjok3r#3181
lol

[02-Jan-19 12:17 PM] blackjok3r#3181
you cant get the import txid from the burn for obvious reasons.

[02-Jan-19 12:18 PM] blackjok3r#3181
could use the amount/address to find the corrosponding on the RPC from the other chain though. I think mostly tracking  imports will be needed and a link on explorer to go back to the burn.

[02-Jan-19 12:19 PM] blackjok3r#3181
hmm maybe exports doesnt need to even be there... if we only track imports, we already have all the required data

[02-Jan-19 12:20 PM] blackjok3r#3181
the script using this, can just take the export txid and  `getrawtransaction` on the source.

[02-Jan-19 12:21 PM] blackjok3r#3181
I can add extra info to getrawtransacion for burns ?

[02-Jan-19 12:22 PM] CrisF#3405
What is the most indisputable way to prove the migration?

[02-Jan-19 12:22 PM] jl777c#5810
confirmed import txid

{Reactions}
👌 (2) 

[02-Jan-19 12:52 PM] Bar_F1sh_Rel#0834
Just a reminder on chain names - much better not to have clusters with the same root. Eg if the root is chain and then add chaina, chainb etc is bad. Better is chainm (master) then chaina, chainb, etc.

{Reactions}
👍 

[02-Jan-19 12:53 PM] jl777c#5810
why?

[02-Jan-19 12:54 PM] Bar_F1sh_Rel#0834
Because bash is dumb and stops reading at the root for grep etc

{Reactions}
💯 

[02-Jan-19 01:03 PM] blackjok3r#3181
I ran into that issue.

[02-Jan-19 01:04 PM] blackjok3r#3181
Just found a new problem here... Given the importTX on the target, there is no way to find out what chain the export came from 😦

[02-Jan-19 01:07 PM] jl777c#5810
you can find all the burns on all the chains and make a global burntxid -> source chain mapping

[02-Jan-19 01:09 PM] blackjok3r#3181
cant we just add the assetchain name to the OP_RETURN in the burn ?

[02-Jan-19 01:09 PM] blackjok3r#3181
it ahs the target already

[02-Jan-19 01:10 PM] blackjok3r#3181
I guess its ahrdforking change again, but we already need new chains.

[02-Jan-19 01:10 PM] jl777c#5810
if hardforking is not an issue, then yes

[02-Jan-19 01:11 PM] jl777c#5810
jl777 branch already adds a "rawproof" field for selfimports, that field is unused for normal burn imports and can be used for the source symbol

{Reactions}
👍 

[02-Jan-19 01:11 PM] jl777c#5810
i can add this change

[02-Jan-19 01:17 PM] blackjok3r#3181
I already wrote it as comments.. as I cant test it on what I'm doing.

[02-Jan-19 01:18 PM] jl777c#5810
pushed to FSM branch. i think it wont be a hardfork as it is added at the end of the data

{Reactions}
👌 🙏 

[02-Jan-19 01:18 PM] blackjok3r#3181
we will need new chains... I can merge  from upstream though np... will just leave it out for now

[02-Jan-19 01:18 PM] blackjok3r#3181
thanks

[02-Jan-19 01:21 PM] jl777c#5810
i added it to the migrate_converttoexport

[02-Jan-19 01:22 PM] ComputerGenie 👴🏼📢#7004
`Because bash is dumb and stops reading at the root for grep etc`
build a better regex in your script?

[02-Jan-19 01:22 PM] jl777c#5810
you can just get the data from the end of the OPRETURN data of the exportTx

[02-Jan-19 01:33 PM] CrisF#3405
@Alright Hi, Can PoS be used with an OnDemand chain?

[02-Jan-19 01:34 PM] blackjok3r#3181
That was not how I was going to do it ... looks like a lot of code is changed

[02-Jan-19 01:38 PM] jl777c#5810
i had to change a lot of the import code for -ac_import

[02-Jan-19 01:39 PM] blackjok3r#3181
is that finished? I didnt really want to pull it in before we carry out a stabiloity test just incase it broke anything.

[02-Jan-19 01:40 PM] jl777c#5810
most of it is isolated inside if ( ccid == 0xffffffff )

[02-Jan-19 01:40 PM] blackjok3r#3181
I guess I will get the rest of this working then merge it to another branch and have a look/

[02-Jan-19 01:40 PM] jl777c#5810
i try not to break existing functionality, but always good to verify

{Reactions}
👌 

[02-Jan-19 01:41 PM] blackjok3r#3181
I dont think we can even test migrates until we know everyone updated, as I did a migrate on CFEKED and it broke the chain totally...

[02-Jan-19 01:41 PM] blackjok3r#3181
or we just need a new cluster

[02-Jan-19 01:41 PM] blackjok3r#3181
ASAP

[02-Jan-19 02:25 PM] CMaurice#1685
just updated, and can't sync CFEKED: `[CFEKED] 96.200% 74866 of 77777`

[02-Jan-19 02:26 PM] CrisF#3405
Hi 👋 
CFEKED is dead at the moment.

[02-Jan-19 02:26 PM] CrisF#3405
Looks like there will be some new chains coming for the Migration Stress Test.

