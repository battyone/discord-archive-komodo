==============================================================
Guild: Komodo
Channel: kmdlabs
Topic: Please read pinned messages
Messages: 100
Range: before 05-Dec-19 12:00 AM
==============================================================

[26-Oct-18 08:53 AM] CrisF#3405
Hi, I'm getting and error in std for STAKEDED```curl_easy_perform() failed: Couldn't connect to server STAKEDED.(127.0.0.1:27043 getbestblockhash), retries: 4
```

[26-Oct-18 09:08 AM] blackjok3r#3181
yes ... you need to delete STAKEDED from .komodo folder

[26-Oct-18 09:09 AM] blackjok3r#3181
then restart

[26-Oct-18 09:09 AM] blackjok3r#3181
something happened to it, and it keeps crashing

[26-Oct-18 09:09 AM] blackjok3r#3181
when i say restart, I mean `./stop.sh` `./start.sh`

[26-Oct-18 09:11 AM] CrisF#3405
I did 2 `./stop.sh` `./start.sh` and now running.  Will monitor.

[26-Oct-18 09:14 AM] blackjok3r#3181
without a full chain resync it will just end up stopping again... I battled for quite some time getting my 3 nodes working.

[26-Oct-18 09:20 AM] CrisF#3405
It's running for the moment but I'll give it a re-sync after deleting .komodo .

[26-Oct-18 09:21 AM] CrisF#3405
@blackjok3r What do people mean when they talk about `reset their wallet.dat`?

[26-Oct-18 09:22 AM] blackjok3r#3181
we have scripts for that in StakedNotary have a read of them if you want to know how it works.

[26-Oct-18 09:23 AM] blackjok3r#3181
basically 
sends all funds into a singl utxo
removes wallet.dat
then imports the private key containing those funds wihtout rescanning the chain
rescans chain back a few blocks to see that one transaction

[26-Oct-18 09:24 AM] blackjok3r#3181
The wallet.dat uses BerkelyDB which gets very slow after it has a lot of transactions in in... the wallet holds every transaction ever made with its keys, not just teh  keys and balance.

[26-Oct-18 09:24 AM] CrisF#3405
Ahh, so that's the script used after the blast test.

[26-Oct-18 09:25 AM] blackjok3r#3181
yes ... if the wallet.dat is like 50MB or 100MB ... hell after STAKEDED blast mine was 2GB or somehting üòÇ

[26-Oct-18 09:25 AM] blackjok3r#3181
then you need to do it üòÉ

[26-Oct-18 09:25 AM] CrisF#3405
haha, that was quite spectacular, eh!

[26-Oct-18 09:26 AM] blackjok3r#3181
yes lol ... just working on python scripts now to stream a file to the streamer chain...

[26-Oct-18 09:26 AM] CrisF#3405
Thanks, I might run it now and then.

[26-Oct-18 09:26 AM] blackjok3r#3181
very basic ... going to send marketmaker into the chain then pull it back out and see if it still runs ..

[26-Oct-18 09:26 AM] CrisF#3405
Sounds like you are making a lot of progress there.

[26-Oct-18 09:27 AM] blackjok3r#3181
once I have that working, I can build on top of that, as its python it will be able to be used o windows and mac aswell.

[26-Oct-18 09:27 AM] CrisF#3405
Cool!

[26-Oct-18 09:27 AM] blackjok3r#3181
wlthough we will need somone to build the marketmaker and komodod for windows with my changes

[26-Oct-18 09:27 AM] blackjok3r#3181
blasting with the streamer is just crazy man, you will love it

[26-Oct-18 09:28 AM] CrisF#3405
Haha, you know I will!

[26-Oct-18 09:28 AM] blackjok3r#3181
I accidently left a VPS running on VULTR (turned off) wasted $15, so I will use that to start and mine a chain later on and try to stream a file to my house... if it works accorss australia just fine, I think it will work anywhere.

[26-Oct-18 09:29 AM] CrisF#3405
Will you do sha256sum or some thing to check the sent data, or is there another way to check nothing gets changed?

[26-Oct-18 09:29 AM] blackjok3r#3181
It cant get changed

[26-Oct-18 09:29 AM] blackjok3r#3181
I think

[26-Oct-18 09:29 AM] blackjok3r#3181
So far nothing has triggered any error checks

[26-Oct-18 09:30 AM] blackjok3r#3181
but I have only been sending a random chunk of data generated by a small C program

[26-Oct-18 09:30 AM] blackjok3r#3181
over an over again

[26-Oct-18 09:30 AM] blackjok3r#3181
The hexstring in = hexstring out so the spltting algo is working peerfectly (that took a long time to work out )

[26-Oct-18 09:31 AM] blackjok3r#3181
had to learn many new things and do lots of maths üòÇ

[26-Oct-18 09:31 AM] blackjok3r#3181
probably he only thing I ever paid attantion too at school LOL

[26-Oct-18 09:31 AM] CrisF#3405
Fortuately for STAKED, haha.

[26-Oct-18 09:32 AM] blackjok3r#3181
thanks to Alrights chat code in python nearly all the functions to make the actual dAPP can be stolen directly.... saved me many hours of work üòÑ

[26-Oct-18 09:34 AM] CrisF#3405
Can anything be sent through this?

[26-Oct-18 09:34 AM] CrisF#3405
You mentioned MM.

[26-Oct-18 09:35 AM] blackjok3r#3181
yes anything can e sent ... its up to the application on how it will use the streamid and generate/assemble the data

[26-Oct-18 09:35 AM] blackjok3r#3181
To start with, I will just have a script that starts the marketmaker up with a bash script (as thats what I have and it works)

[26-Oct-18 09:36 AM] blackjok3r#3181
then a python script that can send small files in a single RPC to marketmaker

[26-Oct-18 09:36 AM] blackjok3r#3181
witch then splits that data up into 8kb chunks and sends them as raw transactions with komodod

[26-Oct-18 09:37 AM] blackjok3r#3181
then in komodod there is a new RPC that will return all data in a block all joined together in a single chunk and a range of sequence ids and the streamid and the blockheight of the first block the stream started in.

[26-Oct-18 09:38 AM] blackjok3r#3181
so the python script to get the data for now, will need to be given a block to start from, and it will iterate over sequential blocks until it gets to an empty block then output the file

[26-Oct-18 09:39 AM] blackjok3r#3181
the way I am doing it, means that large files cannot be sent using this method ... but I think reading the file in chunks and sending will be pretty easy to add

[26-Oct-18 09:39 AM] blackjok3r#3181
same on recv side after its done  X blocks inot memory, write to disk, then continue.

[26-Oct-18 09:40 AM] blackjok3r#3181
this code will be well commented and in python so other devs can easily see how to use it

[26-Oct-18 09:41 AM] blackjok3r#3181
for video stream, the reveiving app, would start the daemon with blocknotify, which will push the blockhash to the app on receiv of each block, the app can then call `getdatafromblock` RPC on that blockhash to extract all data in the block, so it will have the data in realtime.

[26-Oct-18 09:42 AM] CrisF#3405
When you say can't be used for large files, what kind of sizes are you thinking?

[26-Oct-18 09:43 AM] blackjok3r#3181
currently this particular script reads the whole file into memory in a single peice so maybe 20-30mb at a guess

[26-Oct-18 09:43 AM] blackjok3r#3181
thats not really hard to fix though, I just like to start with the simplest thing and then add more on later, as less can go wrong that way

[26-Oct-18 09:44 AM] CrisF#3405
Yeah, especially if it is an easy fix later on.

[26-Oct-18 09:45 AM] blackjok3r#3181
so far I have not had to redesign a lot.... just taking my time and gettig each step working at once... some of the code is really compllicated, even I dont understand what its doing üòÇ

[26-Oct-18 09:45 AM] CrisF#3405
Haha, I'd imagine so!

[26-Oct-18 09:47 AM] blackjok3r#3181
```    for ( z = 0; z < chunks;  z++)
    {
      for ( n = 0; n < chunklen; n++)
      {
          tmpdata[n] = data[y];
          y = y+1;
          if ( y > datalen) {
              tmpdata[n] = '\0';
              decodelen = n / 2;
              break;
          }
      }
      if ( addtoqueue(tmpdata,decodelen) == 1 ) {
          printf(" added chunk.%d y.%d n.%d\n",z,y,n);
      }
    }```

[26-Oct-18 09:47 AM] blackjok3r#3181
üòÑ

[26-Oct-18 09:47 AM] CrisF#3405
Can I write that info up somewhere over the weekend?

[26-Oct-18 09:47 AM] blackjok3r#3181
yes please do .. so far there is like no docs at all

[26-Oct-18 09:47 AM] blackjok3r#3181
code is mostly uncommented

[26-Oct-18 09:48 AM] CrisF#3405
Most code looks complicated to me at the moment, but I'm not even sure where to go with that ‚òù

[26-Oct-18 09:49 AM] blackjok3r#3181
if you need any more info just ask ... 99% of the process is now done

[26-Oct-18 09:49 AM] blackjok3r#3181
that loop took me more than half a day

[26-Oct-18 09:49 AM] blackjok3r#3181
was not easy

[26-Oct-18 09:50 AM] CrisF#3405
I'll get that down and will have more questions then.

{Reactions}
üëç 

[26-Oct-18 10:00 AM] smk762 -  dracocanis ominator#7640
that code is giving me txscl flashbacks.

[26-Oct-18 10:00 AM] smk762 -  dracocanis ominator#7640
you know streamer is the best candidate for tx data stream to vis now.

{Reactions}
üëç 

[26-Oct-18 10:02 AM] CrisF#3405
I have good memories of txscl, haha.  You guys put on quite  show!

[26-Oct-18 10:03 AM] CrisF#3405
Still have many coins from that.  Maybe one day... :treasure:  haah

[26-Oct-18 10:03 AM] smk762 -  dracocanis ominator#7640
`
      let num_chunks = Math.ceil(range_ts/requestInterval);
      console.log("block time range: is "+min_ts+" - "+max_ts+" ("+range_ts+" seconds). Data broken into "+num_chunks+" 5 second chunks");
      for (var i = 0; i < num_chunks; i++) {
        // filter data down to 5 second intervals
        let chunk = j_arr.filter(val => val.timestamp > min_ts+requestInterval*i);
        chunk = chunk.filter(val => val.timestamp < min_ts+requestInterval*(i+1));
        // Add chunk to queue for processing
        sched_Agg(chunk,i);`

[26-Oct-18 10:04 AM] smk762 -  dracocanis ominator#7640
trying to catch as sort so much data at once is no mean feat.

[26-Oct-18 10:04 AM] smk762 -  dracocanis ominator#7640
Your soultion is elegant as fuck üòÇ

[26-Oct-18 10:05 AM] CrisF#3405
Haha, well put!  `elegant as fuck` üòÇ

[26-Oct-18 10:08 AM] smk762 -  dracocanis ominator#7640
it's almost rendered vis obsolete... why use a graph that can be questioned when you can prove not only transfer rate, but also data integrity enroute via a chain transmitted video.

[26-Oct-18 10:10 AM] CrisF#3405
I like the idea of using using first of a kind tech to demo first of the kind tech.

[26-Oct-18 10:13 AM] CrisF#3405
Could an oracle be used to make a timestamp?

[26-Oct-18 10:14 AM] smk762 -  dracocanis ominator#7640
can store and transmit many things, dont see why not timestamp

[26-Oct-18 10:15 AM] smk762 -  dracocanis ominator#7640
not sure if that fits the definition of make though?

[26-Oct-18 10:16 AM] CrisF#3405
It would be adding more moving parts, but if it is within reason to add and it works...

[26-Oct-18 10:16 AM] CrisF#3405
Sorry, maybe `add a timestamp` is better.

[26-Oct-18 10:29 AM] jl777c#5810
realtime buffers are indeed tricky, but once you solve it, the second time is much easier

[26-Oct-18 10:34 AM] actionslacks#4072
@forkwitch was saying something about building circuits with cc using conditional statements.

[26-Oct-18 10:36 AM] actionslacks#4072
I have no idea what that would look like but this is all very cool, congrats @blackjok3r

[26-Oct-18 10:37 AM] blackjok3r#3181
yes after solving it in C, I now need to do much the same thing in python to feed the RPC call and extract the data back out ...

[26-Oct-18 10:52 AM] blackjok3r#3181
successfully sent a script into chain and got it back out... both files identical.

{Reactions}
üöÄ 

[26-Oct-18 10:53 AM] blackjok3r#3181
trying with larger file that still fits into a single block now.

[26-Oct-18 11:05 AM] blackjok3r#3181
1.5MB tar file send and retreived without error

{Reactions}
üíØ (2) 

[26-Oct-18 11:05 AM] CrisF#3405
How fast was it?

[26-Oct-18 11:05 AM] blackjok3r#3181
just need receive script to work over more than 1 block.

[26-Oct-18 11:05 AM] blackjok3r#3181
1.5MB was basically instant matter of seconds

{Reactions}
üëè 

[26-Oct-18 11:06 AM] blackjok3r#3181
the longest time, is calling all the calls in the right order, but a good dAPP will handle all that very easily... might need something in the blast loop that writes out a file or something so that the dapp knows the blaster is primed.

[26-Oct-18 11:07 AM] blackjok3r#3181
stdout has all info, but not sure it will work so good.... the blaster call, locks up the RPC port during the entire stream.

[26-Oct-18 11:08 AM] blackjok3r#3181
had to add another RPC thread and port to queue data

[26-Oct-18 11:41 AM] smk762 -  dracocanis ominator#7640
is there any bootstrap for chains? I deleted all ~/komodo/ST* and resycing everything is slower than expected.

[26-Oct-18 11:50 AM] CrisF#3405
Good question.  I think I once saw @blackjok3r once talking with Alright about it but not sure what cane of it.

[26-Oct-18 11:51 AM] blackjok3r#3181
There are not bootstraps for current chains no

[26-Oct-18 11:52 AM] blackjok3r#3181
I have STAKED1-4 on 103.6.12.112:8080

[26-Oct-18 11:52 AM] blackjok3r#3181
but since moving to multi branch setup that server is no longer hosting STAKED  chains

[26-Oct-18 11:57 AM] blackjok3r#3181
We really need a good dedicated server for seed node, that will help sync times

[26-Oct-18 11:57 AM] blackjok3r#3181
also we should add ufw allows to notary scripts to open notary ports for each chain.

