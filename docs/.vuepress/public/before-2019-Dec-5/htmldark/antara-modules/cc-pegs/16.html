<!DOCTYPE html>
<html lang="en">

<head>
    <title>Komodo - cc-pegs</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    <style>
        /* === GENERAL === */

@font-face {
    font-family: Whitney;
    src: url(https://discordapp.com/assets/6c6374bad0b0b6d204d8d6dc4a18d820.woff);
    font-weight: 300;
}

@font-face {
    font-family: Whitney;
    src: url(https://discordapp.com/assets/e8acd7d9bf6207f99350ca9f9e23b168.woff);
    font-weight: 400;
}

@font-face {
    font-family: Whitney;
    src: url(https://discordapp.com/assets/3bdef1251a424500c1b3a78dea9b7e57.woff);
    font-weight: 500;
}

@font-face {
    font-family: Whitney;
    src: url(https://discordapp.com/assets/be0060dafb7a0e31d2a1ca17c0708636.woff);
    font-weight: 600;
}

@font-face {
    font-family: Whitney;
    src: url(https://discordapp.com/assets/8e12fb4f14d9c4592eb8ec9f22337b04.woff);
    font-weight: 700;
}

body {
    font-family: "Whitney", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 17px;
}

a {
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

img {
    object-fit: contain;
}

.markdown {
    white-space: pre-wrap;
    line-height: 1.3;
    overflow-wrap: break-word;
}

.spoiler {
    border-radius: 3px;
}

.quote {
    border-left: 4px solid;
    border-radius: 3px;
    margin: 8px 0;
    padding-left: 10px;
}

.pre {
    font-family: "Consolas", "Courier New", Courier, monospace;
}

.pre--multiline {
    margin-top: 4px;
    padding: 8px;
    border: 2px solid;
    border-radius: 5px;
}

.pre--inline {
    padding: 2px;
    border-radius: 3px;
    font-size: 85%;
}

.mention {
    font-weight: 500;
}

.emoji {
    width: 1.45em;
    height: 1.45em;
    margin: 0 1px;
    vertical-align: -0.4em;
}

.emoji--small {
    width: 1rem;
    height: 1rem;
}

.emoji--large {
    width: 2rem;
    height: 2rem;
}

/* === INFO === */

.info {
    display: flex;
    max-width: 100%;
    margin: 0 5px 10px 5px;
}

.info__guild-icon-container {
    flex: 0;
}

.info__guild-icon {
    max-width: 88px;
    max-height: 88px;
}

.info__metadata {
    flex: 1;
    margin-left: 10px;
}

.info__guild-name {
    font-size: 1.4em;
}

.info__channel-name {
    font-size: 1.2em;
}

.info__channel-topic {
    margin-top: 2px;
}

.info__channel-message-count {
    margin-top: 2px;
}

.info__channel-date-range {
    margin-top: 2px;
}

/* === CHATLOG === */

.chatlog {
    max-width: 100%;
    margin-bottom: 24px;
}

.chatlog__message-group {
    display: flex;
    margin: 0 10px;
    padding: 15px 0;
    border-top: 1px solid;
}

.chatlog__author-avatar-container {
    flex: 0;
    width: 40px;
    height: 40px;
}

.chatlog__author-avatar {
    border-radius: 50%;
    height: 40px;
    width: 40px;
}

.chatlog__messages {
    flex: 1;
    min-width: 50%;
    margin-left: 20px;
}

.chatlog__author-name {
    font-size: 1em;
    font-weight: 500;
}

.chatlog__timestamp {
    margin-left: 5px;
    font-size: .75em;
}

.chatlog__message {
    padding: 2px 5px;
    margin-right: -5px;
    margin-left: -5px;
    background-color: transparent;
    transition: background-color 1s ease;
}

.chatlog__content {
    font-size: .9375em;
    word-wrap: break-word;
}

.chatlog__edited-timestamp {
    margin-left: 3px;
    font-size: .8em;
}

.chatlog__attachment-thumbnail {
    margin-top: 5px;
    max-width: 50%;
    max-height: 500px;
    border-radius: 3px;
}

.chatlog__embed {
    margin-top: 5px;
    display: flex;
    max-width: 520px;
}

.chatlog__embed-color-pill {
    flex-shrink: 0;
    width: 4px;
    border-top-left-radius: 3px;
    border-bottom-left-radius: 3px;
}

.chatlog__embed-content-container {
    display: flex;
    flex-direction: column;
    padding: 8px 10px;
    border: 1px solid;
    border-top-right-radius: 3px;
    border-bottom-right-radius: 3px;
}

.chatlog__embed-content {
    width: 100%;
    display: flex;
}

.chatlog__embed-text {
    flex: 1;
}

.chatlog__embed-author {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
}

.chatlog__embed-author-icon {
    width: 20px;
    height: 20px;
    margin-right: 9px;
    border-radius: 50%;
}

.chatlog__embed-author-name {
    font-size: .875em;
    font-weight: 600;
}

.chatlog__embed-title {
    margin-bottom: 4px;
    font-size: .875em;
    font-weight: 600;
}

.chatlog__embed-description {
    font-weight: 500;
    font-size: 14px;
}

.chatlog__embed-fields {
    display: flex;
    flex-wrap: wrap;
}

.chatlog__embed-field {
    flex: 0;
    min-width: 100%;
    max-width: 506px;
    padding-top: 10px;
}

.chatlog__embed-field--inline {
    flex: 1;
    flex-basis: auto;
    min-width: 150px;
}

.chatlog__embed-field-name {
    margin-bottom: 4px;
    font-size: .875em;
    font-weight: 600;
}

.chatlog__embed-field-value {
    font-size: .875em;
    font-weight: 500;
}

.chatlog__embed-thumbnail {
    flex: 0;
    margin-left: 20px;
    max-width: 80px;
    max-height: 80px;
    border-radius: 3px;
}

.chatlog__embed-image-container {
    margin-top: 10px;
}

.chatlog__embed-image {
    max-width: 500px;
    max-height: 400px;
    border-radius: 3px;
}

.chatlog__embed-footer {
    margin-top: 10px;
}

.chatlog__embed-footer-icon {
    margin-right: 4px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    vertical-align: middle;
}

.chatlog__embed-footer-text {
    font-weight: 500;
    font-size: .75em;
}

.chatlog__reactions {
    display: flex;
}

.chatlog__reaction {
    display: flex;
    align-items: center;
    margin: 6px 2px 2px 2px;
    padding: 3px 6px;
    border-radius: 3px;
}

.chatlog__reaction-count {
    min-width: 9px;
    margin-left: 6px;
    font-size: .875em;
}

.chatlog__bot-tag {
    margin-left: 0.3em;
    background: #7289da;
    color: #ffffff;
    font-size: 0.625em;
    padding: 1px 2px;
    border-radius: 3px;
    vertical-align: middle;
    line-height: 1.3;
    position: relative;
    top: -.2em;
}
    </style>
    <style>
        /* === GENERAL === */

body {
    background-color: #36393e;
    color: #dcddde;
}

a {
    color: #0096cf;
}

.spoiler {
    background-color: rgba(255, 255, 255, 0.1);
}

.quote {
    border-color: #4f545c;
}

.pre {
    background-color: #2f3136 !important;
}

.pre--multiline {
    border-color: #282b30 !important;
    color: #839496 !important;
}

.mention {
    color: #7289da;
}

/* === INFO === */

.info__guild-name {
    color: #ffffff;
}

.info__channel-name {
    color: #ffffff;
}

.info__channel-topic {
    color: #ffffff;
}

/* === CHATLOG === */

.chatlog__message-group {
    border-color: rgba(255, 255, 255, 0.1);
}

.chatlog__author-name {
    color: #ffffff;
}

.chatlog__timestamp {
    color: rgba(255, 255, 255, 0.2);
}

.chatlog__message--highlighted {
    background-color: rgba(114, 137, 218, 0.2) !important;
}

.chatlog__message--pinned {
    background-color: rgba(249, 168, 37, 0.05);
}

.chatlog__edited-timestamp {
    color: rgba(255, 255, 255, 0.2);
}

.chatlog__embed-content-container {
    background-color: rgba(46, 48, 54, 0.3);
    border-color: rgba(46, 48, 54, 0.6);
}

.chatlog__embed-author-name {
    color: #ffffff;
}

.chatlog__embed-author-name-link {
    color: #ffffff;
}

.chatlog__embed-title {
    color: #ffffff;
}

.chatlog__embed-description {
    color: rgba(255, 255, 255, 0.6);
}

.chatlog__embed-field-name {
    color: #ffffff;
}

.chatlog__embed-field-value {
    color: rgba(255, 255, 255, 0.6);
}

.chatlog__embed-footer {
    color: rgba(255, 255, 255, 0.6);
}

.chatlog__reaction {
    background-color: rgba(255, 255, 255, 0.05);
}

.chatlog__reaction-count {
    color: rgba(255, 255, 255, 0.3);
}
    </style>

    <script>
        function scrollToMessage(event, id) {
            var element = document.getElementById('message-' + id);

            if (element !== null && element !== undefined) {
                event.preventDefault();

                element.classList.add('chatlog__message--highlighted');

                window.scrollTo({
                    top: element.getBoundingClientRect().top - document.body.getBoundingClientRect().top - (window.innerHeight / 2),
                    behavior: 'smooth'
                });

                window.setTimeout(function() {
                    element.classList.remove('chatlog__message--highlighted');
                }, 2000);
            }
        }
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/solarized-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.pre--multiline').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });
    </script>
</head>
<body>

<div class="info">
    <div class="info__guild-icon-container">
        <img class="info__guild-icon" src="https://cdn.discordapp.com/icons/412898016371015680/a_157cb08c4198ad53b9e9b7168c930571.png" />
    </div>
    <div class="info__metadata">
        <div class="info__guild-name">Komodo</div>
        <div class="info__channel-name">cc-pegs</div>

            <div class="info__channel-topic">The Pegs Antara modules is a mechanism for creating a decentralized stable coin, pegged to any asset like fiat currency, stock, crypto that has a reliable price source 
Intro + RPC: https://docs.komodoplatform.com/basic-docs/antara/antara-api/pegs.html
User tutorial: https://docs.komodoplatform.com/basic-docs/antara/antara-tutorials/pegs-module-user-tutorial.html
Peg Creator tutorial: https://docs.komodoplatform.com/basic-docs/antara/antara-tutorials/pegs-module-creator-tutorial.html</div>

        <div class="info__channel-message-count">100 messages</div>

            <div class="info__channel-date-range">
                    Before 05-Dec-19 12:00 AM
            </div>
    </div>
</div>

<div class="chatlog">
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">11-Nov-19 10:52 AM</span>

                    <div class="chatlog__message " data-message-id="643402623554420748" id="message-643402623554420748">
                        <div class="chatlog__content">
                            <span class="markdown"><span class="mention" title="jl777c#5810">@jl777c</span> I gave a thought on solving the parallel withdraw problem on friday and over the weekend. I have and idea to create another msig address from the same pubkeys (if possible) and move the funds that are used for withdraw over there. This would solve both parallel withdraw and the balance thing as we would know how much is left. Ofc, the withdraw should expire after sometime and those fund need to be returned to the deposit address so it can be used again and have correct balance. That part is IMHO little bit picky as we have to be sure funds are not stuck at temp address.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">11-Nov-19 10:54 AM</span>

                    <div class="chatlog__message " data-message-id="643403102619435008" id="message-643403102619435008">
                        <div class="chatlog__content">
                            <span class="markdown">great!</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643403140548526110" id="message-643403140548526110">
                        <div class="chatlog__content">
                            <span class="markdown">just change the order of the pubkeys in the redeemscript</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643403189080555521" id="message-643403189080555521">
                        <div class="chatlog__content">
                            <span class="markdown">you can make N! different msig addresses from N pubkeys</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">11-Nov-19 10:55 AM</span>

                    <div class="chatlog__message " data-message-id="643403308064702475" id="message-643403308064702475">
                        <div class="chatlog__content">
                            <span class="markdown">Aha, so if the order of keys is 1,3,2 it wil give different address than 1,2,3.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">11-Nov-19 10:57 AM</span>

                    <div class="chatlog__message " data-message-id="643403954746556416" id="message-643403954746556416">
                        <div class="chatlog__content">
                            <span class="markdown">the msig address is rmd160(sha256(redeemscript))</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">11-Nov-19 10:57 AM</span>

                    <div class="chatlog__message " data-message-id="643404002410758145" id="message-643404002410758145">
                        <div class="chatlog__content">
                            <span class="markdown"><img class="emoji emoji--large" alt="👍" title="👍" src="https://twemoji.maxcdn.com/2/72x72/1f44d.png" /></span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643404254685560832" id="message-643404254685560832">
                        <div class="chatlog__content">
                            <span class="markdown">Ok, so I&#39;ll try this with oraclefeed. And I will introduce withdraw expiration (basicallly it will check tx time and if some time has passed it will not look it as pending anymore)</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">11-Nov-19 11:35 AM</span>

                    <div class="chatlog__message " data-message-id="643413481202384906" id="message-643413481202384906">
                        <div class="chatlog__content">
                            <span class="markdown">For 1of1 gateway can I generate somehow another address from the pubkey and to always be the same?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">11-Nov-19 11:38 AM</span>

                    <div class="chatlog__message " data-message-id="643414154774052884" id="message-643414154774052884">
                        <div class="chatlog__content">
                            <span class="markdown">might need to have a dummy pubkeys and make it a 1of2</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643414209589149716" id="message-643414209589149716">
                        <div class="chatlog__content">
                            <span class="markdown">then you can make the second pubkey any random one to make a new address</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">11-Nov-19 11:39 AM</span>

                    <div class="chatlog__message " data-message-id="643414413990428682" id="message-643414413990428682">
                        <div class="chatlog__content">
                            <span class="markdown">Ok, it is not really important right now. As usually MofN gateway will be used. 1of1 we use for test, but I don&#39;t expect any significant use in production.</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643414506923360277" id="message-643414506923360277">
                        <div class="chatlog__content">
                            <span class="markdown">Ah, I can use 1of2 address from the same pubkey!</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">11-Nov-19 11:41 AM</span>

                    <div class="chatlog__message " data-message-id="643415028673937408" id="message-643415028673937408">
                        <div class="chatlog__content">
                            <span class="markdown">but same pubkey twice is the same address in both A B vs B A</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">11-Nov-19 11:42 AM</span>

                    <div class="chatlog__message " data-message-id="643415265966555176" id="message-643415265966555176">
                        <div class="chatlog__content">
                            <span class="markdown">Yes, but it is different address than single pubkey address. I just need different address!</span>

                        </div>



                        <div class="chatlog__reactions">
                                <div class="chatlog__reaction">
                                    <img class="emoji emoji--small" alt="🙂" title="🙂" src="https://twemoji.maxcdn.com/2/72x72/1f642.png" />
                                    <span class="chatlog__reaction-count">1</span>
                                </div>
                        </div>
                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">11-Nov-19 11:52 AM</span>

                    <div class="chatlog__message " data-message-id="643417727800836116" id="message-643417727800836116">
                        <div class="chatlog__content">
                            <span class="markdown">oh, yes a 1of1 msig is different than p2pk/p2pkh</span>

                        </div>



                        <div class="chatlog__reactions">
                                <div class="chatlog__reaction">
                                    <img class="emoji emoji--small" alt="👍" title="👍" src="https://twemoji.maxcdn.com/2/72x72/1f44d.png" />
                                    <span class="chatlog__reaction-count">1</span>
                                </div>
                        </div>
                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 11:03 AM</span>

                    <div class="chatlog__message " data-message-id="643767741538369566" id="message-643767741538369566">
                        <div class="chatlog__content">
                            <span class="markdown"><span class="mention" title="jl777c#5810">@jl777c</span> Is there a way that the utxo is found from mempool like with listunspent with regular rpc commands. I want to move funds from deposit address to tmp address and right away create raw tx using those utxos from tmp address. I would like to avoid waiting it to be mined and then creating raw tx in another step as it would need another tx and syncing with external chain...</span>

                                <span class="chatlog__edited-timestamp" title="12-Nov-19 11:12 AM">(edited)</span>
                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 11:26 AM</span>

                    <div class="chatlog__message " data-message-id="643773546497179650" id="message-643773546497179650">
                        <div class="chatlog__content">
                            <span class="markdown">Or maybe I don&#39;t need to look for unspents, but just send funds to tmpaddress and then use that txid and vout as vin for createrawtx.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 11:27 AM</span>

                    <div class="chatlog__message " data-message-id="643773861409718272" id="message-643773861409718272">
                        <div class="chatlog__content">
                            <span class="markdown">yes</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643773968695820288" id="message-643773968695820288">
                        <div class="chatlog__content">
                            <span class="markdown">you can getrawmempool and scan for the utxo to spend, but if you know precisely the txid already, it is easier</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 11:28 AM</span>

                    <div class="chatlog__message " data-message-id="643774194987040768" id="message-643774194987040768">
                        <div class="chatlog__content">
                            <span class="markdown">I will know it as I will first make move of funds and then right away createrawtransaction</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643774760412643358" id="message-643774760412643358">
                        <div class="chatlog__content">
                            <span class="markdown">Ahhhhhhhhhh, I didn&#39;t thought about this enough. To move the funds from deposit to temp address it again needs to have signing process done <img class="emoji " alt="😔" title="😔" src="https://twemoji.maxcdn.com/2/72x72/1f614.png" /></span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643774952188936194" id="message-643774952188936194">
                        <div class="chatlog__content">
                            <span class="markdown">I mix 1of1 and multisig situations when thinking as I was testing a lot with 1of1 gateway...</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 12:35 PM</span>

                    <div class="chatlog__message " data-message-id="643790878351032321" id="message-643790878351032321">
                        <div class="chatlog__content">
                            <span class="markdown">For the sake of knowing exact balance and for parallel withdraw, it would be good to reserve the utxos that will be spent in withdraw. The best way was to spend them to temp address as it would have exact utxo and the rest utxo would be available for spending in other withdraws. But as this also needs multiple signing process, something else must be done in order to solve this.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 12:40 PM</span>

                    <div class="chatlog__message " data-message-id="643792358521045002" id="message-643792358521045002">
                        <div class="chatlog__content">
                            <span class="markdown">maybe think in terms of managing the total balance in convenient sizes. the msig signers can prepare these utxos while collecting the 5% rewards</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 12:50 PM</span>

                    <div class="chatlog__message " data-message-id="643794637852508161" id="message-643794637852508161">
                        <div class="chatlog__content">
                            <span class="markdown">The collecting rewards thing haven&#39;t been made yet, and this will also be difficult as multi signing thing must be done. Nevertheless, even if we have convenient sizes we must mark that utxo will be spent in order to both know exact balance at the moment and to avoid using same utxo in two parallel withdraws.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 12:54 PM</span>

                    <div class="chatlog__message " data-message-id="643795744720945162" id="message-643795744720945162">
                        <div class="chatlog__content">
                            <span class="markdown">how about 8 parallel withdraws</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643796041912811531" id="message-643796041912811531">
                        <div class="chatlog__content">
                            <span class="markdown">prepare ahead of time 1/8th of balance in each of 8 subaddresses. for each withdraw, do a userpubkey % 8 to find which of the 8 parallel tracks it will use and single thread within each.</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643796131171532801" id="message-643796131171532801">
                        <div class="chatlog__content">
                            <span class="markdown">the restriction is that no more than 1/8th of total balance can be withdrawn at once, which seems an acceptable limitation</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643796257982119957" id="message-643796257982119957">
                        <div class="chatlog__content">
                            <span class="markdown">each withdraw track, can then use a baton to ensure only one pending withdraw at a time</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643796415016992768" id="message-643796415016992768">
                        <div class="chatlog__content">
                            <span class="markdown">as a withdraw happens, then a rebalancing of funds in the 7 other addresses would need to happen, maybe just do this once per day, along with collection of rewards</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643796556444860426" id="message-643796556444860426">
                        <div class="chatlog__content">
                            <span class="markdown">something like this. where the withdraws are constrained to allow multiple withdraws that dont conflict at all</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643796750112653313" id="message-643796750112653313">
                        <div class="chatlog__content">
                            <span class="markdown">and total balance info can be put into the opreturn and validated that it properly adjusts from the previous balance, this way we dont need an external source for balance info</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:07 PM</span>

                    <div class="chatlog__message " data-message-id="643799014789218345" id="message-643799014789218345">
                        <div class="chatlog__content">
                            <span class="markdown">Hmmm, I have to think about it little bit. Splitting in 8 different balances is ok, and baton (on AC side I suppose) would resolve reserving utxos for withdraw. The rebalancing thing would require automated &quot;withdraw&quot; of all 8 balances back to new 8 balances and the siging process to be done....</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643799248063954955" id="message-643799248063954955">
                        <div class="chatlog__content">
                            <span class="markdown">In the beginning when there are little deposits, it will be probably difficult to iwthdraw your deposit as it can be more than 1/8 of balance...</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:17 PM</span>

                    <div class="chatlog__message " data-message-id="643801638716571701" id="message-643801638716571701">
                        <div class="chatlog__content">
                            <span class="markdown">unless, we make specific set of initial deposits to cover the startup case</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643801825891581953" id="message-643801825891581953">
                        <div class="chatlog__content">
                            <span class="markdown">with a daily rebalancing, the msig nodes can just spend all the 8 balances to the 8 addresses in a single rebalancing transaction, i guess skipping any pending withraws</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643801904274735125" id="message-643801904274735125">
                        <div class="chatlog__content">
                            <span class="markdown">if an incremental method can be made, it would be better</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643802180545019905" id="message-643802180545019905">
                        <div class="chatlog__content">
                            <span class="markdown">maybe a just in time process where funds are kept in the main msig address and only transferred to the 8 withdraw balance addresses, as needed. it is an extra transaction, but if we can do this, then it handles the case when there are not enough funds in the 1/8th address</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643802299688288268" id="message-643802299688288268">
                        <div class="chatlog__content">
                            <span class="markdown">once that case is handled, if we notice that there are already enough funds in the 1/8th address, then the transfer from main address can be skipped</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643802397558439947" id="message-643802397558439947">
                        <div class="chatlog__content">
                            <span class="markdown">i think it is a matter to carefully track the 9 balances, and 8 pending withdraws</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:21 PM</span>

                    <div class="chatlog__message " data-message-id="643802538029744130" id="message-643802538029744130">
                        <div class="chatlog__content">
                            <span class="markdown">Every transfer is again multi sig tx which needs signing</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:21 PM</span>

                    <div class="chatlog__message " data-message-id="643802549035466774" id="message-643802549035466774">
                        <div class="chatlog__content">
                            <span class="markdown">and there are the new funds that are coming in, that start as unallocated. maybe they can be moved to the 1/8th address with the lowest balance, so this is the incremental aspect</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643802645425029120" id="message-643802645425029120">
                        <div class="chatlog__content">
                            <span class="markdown">yes, i am assuming that automating a msig tx is achieved already</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:22 PM</span>

                    <div class="chatlog__message " data-message-id="643802862903885835" id="message-643802862903885835">
                        <div class="chatlog__content">
                            <span class="markdown">We have automated signing process, but it is slow and it requires txs on AC.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:23 PM</span>

                    <div class="chatlog__message " data-message-id="643802953110519812" id="message-643802953110519812">
                        <div class="chatlog__content">
                            <span class="markdown">so the various states that a utxo can be in needs to be tracked and then make sure that the opreturn data has the required summaries. it could be that we have an &quot;intialize&quot; process that takes all the existing balances and gets things into a proper state</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643803046081462275" id="message-643803046081462275">
                        <div class="chatlog__content">
                            <span class="markdown">as long as it is automated, slow is ok, just not too slow. 10 blocks for a signature is 10 minutes, which seems ok</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:24 PM</span>

                    <div class="chatlog__message " data-message-id="643803334444056586" id="message-643803334444056586">
                        <div class="chatlog__content">
                            <span class="markdown">This all brings complexity of the system to a whole new level and creates space for errors. The utxo system was a perfect thing but with msig it is difficult to use it as it requires complete process for signing</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:25 PM</span>

                    <div class="chatlog__message " data-message-id="643803663080620052" id="message-643803663080620052">
                        <div class="chatlog__content">
                            <span class="markdown">maybe we need to do it like iguana notarizer and make it direct p2p to get the msig tx signed</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643803900809314343" id="message-643803900809314343">
                        <div class="chatlog__content">
                            <span class="markdown">but regardless of signing method, i think as long as a withdraw progresses toward completion, or times out and can be resubmitted, it will be complex, but will still work</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:27 PM</span>

                    <div class="chatlog__message " data-message-id="643803966932516874" id="message-643803966932516874">
                        <div class="chatlog__content">
                            <span class="markdown">That would be great, to reduce the overhead we have for signing and to have instant signing. Then we would be able to move the funds to temp address.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:28 PM</span>

                    <div class="chatlog__message " data-message-id="643804272290562060" id="message-643804272290562060">
                        <div class="chatlog__content">
                            <span class="markdown">what if you used the mempool?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:28 PM</span>

                    <div class="chatlog__message " data-message-id="643804317853286402" id="message-643804317853286402">
                        <div class="chatlog__content">
                            <span class="markdown">For what?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:28 PM</span>

                    <div class="chatlog__message " data-message-id="643804352469008394" id="message-643804352469008394">
                        <div class="chatlog__content">
                            <span class="markdown">why wait for confirmations to complete the signing?</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643804426980687892" id="message-643804426980687892">
                        <div class="chatlog__content">
                            <span class="markdown">couldnt the msig signers scan the mempool and see if there is any new tx that needs to be signed?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:30 PM</span>

                    <div class="chatlog__message " data-message-id="643804733404086274" id="message-643804733404086274">
                        <div class="chatlog__content">
                            <span class="markdown">Can&#39;t remember why I did it this way. I think there was some issue, but maybe it can be done.</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643805849923354644" id="message-643805849923354644">
                        <div class="chatlog__content">
                            <span class="markdown">So the flow would be like this:
- withdraw tx created (on AC)
- oraclefeed takes utxos and make utxo to temp address in exact amount
- signing is done immediately in mempool and external tx broadcasted
- then createrawtx can be done right away without waiting for previous external tx to be mined
- signing again starts and it finishes completely in mempool
- now the real withdraw tx is broadcasted on external chain (but waiting for previous tx to be mined)</span>

                                <span class="chatlog__edited-timestamp" title="12-Nov-19 01:35 PM">(edited)</span>
                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643806575970091008" id="message-643806575970091008">
                        <div class="chatlog__content">
                            <span class="markdown">I think there was some problem with race condition for signing, and one by one tx was making it ok.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:37 PM</span>

                    <div class="chatlog__message " data-message-id="643806670706966550" id="message-643806670706966550">
                        <div class="chatlog__content">
                            <span class="markdown">maybe separate the rawtx construction and signing</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:37 PM</span>

                    <div class="chatlog__message " data-message-id="643806687345639435" id="message-643806687345639435">
                        <div class="chatlog__content">
                            <span class="markdown">But with a baton, there will not be any race condition</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:38 PM</span>

                    <div class="chatlog__message " data-message-id="643806754890711050" id="message-643806754890711050">
                        <div class="chatlog__content">
                            <span class="markdown">each node can independently sign the same rawtx and just submit the signature in an opretuen</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643806808762351626" id="message-643806808762351626">
                        <div class="chatlog__content">
                            <span class="markdown">then you can combine M of the signatures to make a valid signed transaction</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:40 PM</span>

                    <div class="chatlog__message " data-message-id="643807218973671444" id="message-643807218973671444">
                        <div class="chatlog__content">
                            <span class="markdown">I think there will be no problem with that as long as I&#39;m using sequential signing with a baton. If two nodes want to sign and spend baton at the sametime, one will succed and other won&#39;t as baton will be spent</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643807853714604082" id="message-643807853714604082">
                        <div class="chatlog__content">
                            <span class="markdown">This temp address thing wil take one more txfee from the external funds so the user will receive amount-2*txfees-non-spending marker fee. For expensive coins I think we can set txfee to minimum and marker fee can be like 1k sat</span>

                                <span class="chatlog__edited-timestamp" title="12-Nov-19 01:43 PM">(edited)</span>
                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643808108962906114" id="message-643808108962906114">
                        <div class="chatlog__content">
                            <span class="markdown">We could also make markers 1 sat, is there anything against this?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 01:50 PM</span>

                    <div class="chatlog__message " data-message-id="643809737628188682" id="message-643809737628188682">
                        <div class="chatlog__content">
                            <span class="markdown">it might fall below dust threshold</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643809795412983861" id="message-643809795412983861">
                        <div class="chatlog__content">
                            <span class="markdown">can the marker be on the AC side?</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643809845014822923" id="message-643809845014822923">
                        <div class="chatlog__content">
                            <span class="markdown">i mean baton</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 01:56 PM</span>

                    <div class="chatlog__message " data-message-id="643811422869913635" id="message-643811422869913635">
                        <div class="chatlog__content">
                            <span class="markdown">Baton is on AC side, but the non-spendable marker to mark that the external withdraw has been executed and prevent double withdraws must be on external chain. That is why I&#39;m asking how low we can go with the amount?</span>

                                <span class="chatlog__edited-timestamp" title="12-Nov-19 01:56 PM">(edited)</span>
                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643811606467182612" id="message-643811606467182612">
                        <div class="chatlog__content">
                            <span class="markdown">And baton on the ac side will in the end be spent to the nodes pubkey which does markdone tx on AC</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 02:00 PM</span>

                    <div class="chatlog__message " data-message-id="643812381918625803" id="message-643812381918625803">
                        <div class="chatlog__content">
                            <span class="markdown">i think 500 or 600 sats is the dust level for a lot of chains</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 02:01 PM</span>

                    <div class="chatlog__message " data-message-id="643812515838427156" id="message-643812515838427156">
                        <div class="chatlog__content">
                            <span class="markdown">Ok so we can go with 1k sat</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="643812552060436490" id="message-643812552060436490">
                        <div class="chatlog__content">
                            <span class="markdown">This will be insignificant for BTC</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 02:01 PM</span>

                    <div class="chatlog__message " data-message-id="643812595123486721" id="message-643812595123486721">
                        <div class="chatlog__content">
                            <span class="markdown">a 10 cents per BTC withdraw is not so bad, we just need to have a minimum withdraw so the percentage is reasonable max</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">12-Nov-19 02:04 PM</span>

                    <div class="chatlog__message " data-message-id="643813329856495616" id="message-643813329856495616">
                        <div class="chatlog__content">
                            <span class="markdown">With 100k BTC price this will be 1$. With 10k it is 0.10$</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">12-Nov-19 02:38 PM</span>

                    <div class="chatlog__message " data-message-id="643821921263419450" id="message-643821921263419450">
                        <div class="chatlog__content">
                            <span class="markdown">it seems acceptable, just have a minimum withdraw big enough so it is never more than 5% fee</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">15-Nov-19 01:59 PM</span>

                    <div class="chatlog__message " data-message-id="644899344604200970" id="message-644899344604200970">
                        <div class="chatlog__content">
                            <span class="markdown"><span class="mention" title="jl777c#5810">@jl777c</span> So I have totaly refactored the logic of gateways withdraw (for now on importgateway to test) and it seems this will be better. The flow goes like this:
- withdraw tx created by user
- when confirmed/notarized, oraclefeed takes one withdraw at the time and creates raw tx
- signing happens in mempool so it should be fast and while not signed completely no new withdraws are processed
- when it is signed completely it is broadcasted on external chain and markedone
- then new withdraw is taken from the queue and processed
So we have parallel withdraws created, but serial processing of them one by one (probably it can be more than one per block as everything happens in mempool).

And now thee is only the question of checking balance, as I think the n/2 consensus is not good because when the withdraw is broadcasted externally in that moment the balance is lowered and until it reaches n/2 nodes publishing it in the mean time another withdraw could be created. So I suggest we use minimum that is reporeted in latest oraclesdata. Even if some node reports false balance that is lower, it could only get withdraws halted until we resolve it.</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">15-Nov-19 02:01 PM</span>

                    <div class="chatlog__message " data-message-id="644899700629307393" id="message-644899700629307393">
                        <div class="chatlog__content">
                            <span class="markdown">this does sound a lot better! serialized, but processed via mempool is a good trick!</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="644899777435140096" id="message-644899777435140096">
                        <div class="chatlog__content">
                            <span class="markdown">that will allow precise calculation of available balances</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">15-Nov-19 02:03 PM</span>

                    <div class="chatlog__message " data-message-id="644900257469169684" id="message-644900257469169684">
                        <div class="chatlog__content">
                            <span class="markdown">Yes, just hope there will not be some problem because everything is in mempool, if some tx does not reach mined block it could block others that depend on it...</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">15-Nov-19 02:05 PM</span>

                    <div class="chatlog__message " data-message-id="644900695878795267" id="message-644900695878795267">
                        <div class="chatlog__content">
                            <span class="markdown">in that case it will get mined in the next block. given a chain of mempool tx, it cant be mined out of order!</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">15-Nov-19 02:10 PM</span>

                    <div class="chatlog__message " data-message-id="644901952714571777" id="message-644901952714571777">
                        <div class="chatlog__content">
                            <span class="markdown">Yeah</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="644902004497317909" id="message-644902004497317909">
                        <div class="chatlog__content">
                            <span class="markdown">Just thinking if something can cause problems</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">15-Nov-19 02:10 PM</span>

                    <div class="chatlog__message " data-message-id="644902149897060382" id="message-644902149897060382">
                        <div class="chatlog__content">
                            <span class="markdown">it might cause tx to expire and invalidate a chain if it isnt mined in time</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="644902527778947094" id="message-644902527778947094">
                        <div class="chatlog__content">
                            <span class="markdown">make sure to disable expiration. if you dont use nlocktime and set expireblocks to 0, it wont expire. of course, then you wont collect the rewards... so i think we need to make sure that rewards are actively collected to not lose too much unclaimed rewards. then when needed to do a withdraw, it is only a few hours of lost rewards. that will keep the mempool chain of tx all valid, regardless of how long they take to confirm.</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="644902605218119682" id="message-644902605218119682">
                        <div class="chatlog__content">
                            <span class="markdown">also, rebroadcasting the unconfirmed rawtx until it confirms will assure that it will eventually confirm</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">15-Nov-19 02:36 PM</span>

                    <div class="chatlog__message " data-message-id="644908553219342357" id="message-644908553219342357">
                        <div class="chatlog__content">
                            <span class="markdown">Are you talking about external txs or on AC?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">15-Nov-19 04:08 PM</span>

                    <div class="chatlog__message " data-message-id="644931672118263834" id="message-644931672118263834">
                        <div class="chatlog__content">
                            <span class="markdown">for any mempool tx chain. rebroadcasting will maximize chance it is mined sooner than later. important thing is to make sure the tx cannot expire via the mempool expiration, or for KMD via nlocktime being too old</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">18-Nov-19 10:35 AM</span>

                    <div class="chatlog__message " data-message-id="645935001711411230" id="message-645935001711411230">
                        <div class="chatlog__content">
                            <span class="markdown">I have set locktime to 0 for createrawtransaction on all chains, and for Sapling chains I have set expiryheight to 10000 that should be enough for approx. 7 days when blocktime is 1 min. But the withdraw will expire probably in an few hours as now when signing is in mempool it should execute at worst after hour or so (after initial withdraw tx is confirmed for chains without notarziation).</span>

                                <span class="chatlog__edited-timestamp" title="18-Nov-19 10:35 AM">(edited)</span>
                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">18-Nov-19 10:36 AM</span>

                    <div class="chatlog__message " data-message-id="645935246868480000" id="message-645935246868480000">
                        <div class="chatlog__content">
                            <span class="markdown">ok</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">18-Nov-19 10:37 AM</span>

                    <div class="chatlog__message " data-message-id="645935537194270741" id="message-645935537194270741">
                        <div class="chatlog__content">
                            <span class="markdown">I didn&#39;t know that expiryheight 0 is to not expire at all, I can set 0 instead!</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="645935702948708354" id="message-645935702948708354">
                        <div class="chatlog__content">
                            <span class="markdown">But I didn&#39;t get the reward part you mentioned...</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">18-Nov-19 10:39 AM</span>

                    <div class="chatlog__message " data-message-id="645936125562847243" id="message-645936125562847243">
                        <div class="chatlog__content">
                            <span class="markdown">i guess you can claim rewards even with locktime of 0, but the output wont be valid for claiming as it needs locktime</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="645936275089784852" id="message-645936275089784852">
                        <div class="chatlog__content">
                            <span class="markdown">so we would need to have a daily rewards claiming among the msig nodes to minimize the lost rewards from not claiming</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="645936310263218184" id="message-645936310263218184">
                        <div class="chatlog__content">
                            <span class="markdown">during withdraws</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">18-Nov-19 10:40 AM</span>

                    <div class="chatlog__message " data-message-id="645936427007213578" id="message-645936427007213578">
                        <div class="chatlog__content">
                            <span class="markdown">Are you speaking about the rewards for holding KMD?</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="jl777c#5810" data-user-id="455741312273219595">jl777c</span>


                <span class="chatlog__timestamp">18-Nov-19 10:40 AM</span>

                    <div class="chatlog__message " data-message-id="645936433940529152" id="message-645936433940529152">
                        <div class="chatlog__content">
                            <span class="markdown">if you remember, to claim rewards in KMD, it needs to be one hour old and be &gt;10KMD and have locktime set</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="645936442329137171" id="message-645936442329137171">
                        <div class="chatlog__content">
                            <span class="markdown">yes</span>

                        </div>



                    </div>
                    <div class="chatlog__message " data-message-id="645936503679221762" id="message-645936503679221762">
                        <div class="chatlog__content">
                            <span class="markdown">this is the funds that pays for the msig signers running the nodes long term</span>

                        </div>



                    </div>
            </div>
        </div>
        <div class="chatlog__message-group">
            <div class="chatlog__author-avatar-container">
                <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/424224648889106444/2fcedf61e46562f71af0c11a6dedfb4f.png" />
            </div>
            <div class="chatlog__messages">
                <span class="chatlog__author-name" title="Mihailo#5902" data-user-id="424224648889106444">Mihailo</span>


                <span class="chatlog__timestamp">18-Nov-19 10:41 AM</span>

                    <div class="chatlog__message " data-message-id="645936662014197761" id="message-645936662014197761">
                        <div class="chatlog__content">
                            <span class="markdown">Ok, I haven&#39;t at all approached the reward thing yet. Aha, ok that is the business logic for msig signers.</span>

                        </div>



                    </div>
            </div>
        </div>
</div>

</body>
</html>
