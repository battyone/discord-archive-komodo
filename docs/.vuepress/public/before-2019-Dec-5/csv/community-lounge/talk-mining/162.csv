AuthorID;Author;Date;Content;Attachments;Reactions;
"455741312273219595";"jl777c#5810";"08-Aug-19 10:41 AM";"for the 2x to 4x cases";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:42 AM";"You have the 4 in place of 3 in RST?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:42 AM";"no, its still 3";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:42 AM";"3, 6 and 12 are active and working very well together";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:43 AM";"It's noticeably better with all 3?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:43 AM";"yes! they do get the diff up to close where it needs to be";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:43 AM";"does 12 over-ride 6 which overrides 3?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:44 AM";"not always";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:44 AM";"it's min target rule?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:44 AM";"usually 3 is the dominant one, but really depends on the specifics";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:44 AM";"yes usually all three have very close values";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:44 AM";"sometimes 3 is much lower target (higher diff) than the other two, but after a bit, they are essentially the same";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:45 AM";"i have seen some cases where 6 was the lowest target, and even 12";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:45 AM";"didnt find any pattern, numbers flying by so fast";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:46 AM";"if RST is active >20 blocks, is digishield automatically close when it takes over?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:47 AM";"with 3, 6, 12, it lasts closer to 40 blocks and probably that is why the diff is closer";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:48 AM";"From the 1 run of TSA  I've looked at so far that lasted about 20 blocks, average solvetime was correct which means targets was correct.  Digi looks at only past 17 blocks.  It should be adjusted so that it is on target in a case like that";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 10:54 AM";"I'll look at what you got.  My plan today is to start modelling this. All the DA needs to abstracted away from programming and look like math.     What kind of efficiency is lost declaring everything arith256?   A nanosecond?  Is lack of RAM a problem for KMD nodes?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:55 AM";"i guess a few nanoseconds, this is just local variables so RAM usages is not an issue";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:55 AM";"in a couple hours i will have data from the new test run. the RST phase is working wonderful as usual";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 10:56 AM";"probably the high variance of the TSA is what maybe just made the diff go lower";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 11:08 AM";"So it seems declaring everything arith256 is better because it increases clarity   ctA is what miners solve and validators validate, ctB is what RST sees.  Adjusting ctB by 2.72 is not enough for digi to be on track immediately after a long RST run?";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 11:09 AM";"Do i have that wrong?  what's ctA?";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 11:16 AM";"OK, ctA is RST and digi output.  ctB is the adjusted RST output or zero if digi was in use.  RST uses ctA if ctB is zero, else use ctB.  Digi should be using the same thing, except divide the ctB[i]-ctB[i+1]  values by 2.72";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 11:16 AM";"Right?";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 11:31 AM";"What are the last 2 columns in the CSV?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:01 PM";"correct. last two columes are diff of ctA and solvetime for that height";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:04 PM";"avg D for digi right after RST is the same as avg D for RST....I thought you said there was a problem?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:05 PM";"the problem is that after RST ends, the diff goes low, even to the point of triggering RST again, so clearly something is wrong. i am sending the new test results, which at first look seems much better";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:05 PM";"";"https://cdn.discordapp.com/attachments/456900588018597918/608994315154227200/TSA_div3.csv";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:06 PM";"this is with a div3 for digishield, even for the TSA. also the way the state machine works, the TSA ended up alternating turns with digishield";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:07 PM";"so the pattern of alternating ctB/000000000 is when TSA was active, the lower two bits for nBits are set when TSA did the block";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:07 PM";"digi needs to avg a few of the RST's.   Let me think about how to do that";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:07 PM";"so ending in 3, 7, b, f";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:08 PM";"RST finished on ht.95";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:08 PM";"digi is not stable after RST because RST targets jump around so much";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:10 PM";"then 56 minutes for the next 50 blocks, no RST triggered, so even though the math is wrong, it avoided the problem of earlier versions";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:25 PM";"When I do digishield on ctA values, the difficulty is correct as if no adjustment is needed";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:25 PM";"but without correction, then the diff cant go up as the blocks come out slower";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:28 PM";"found a place where it was overcorrecting, which might explain the 10% slower than expected blocks, also trying to smooth out the TSA a bit more, i remember it was working quite smoothly with a 4 block SMA, but it was too slow, so trying a 2 block + digishield average";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:30 PM";"The 4th column is RST output?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:31 PM";"height, timestamp, nBits in hex, bnTarget based on nBits, ctB, diff, solvetime";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:33 PM";"next test run with the above changes RST kicked in an in 2 blocks it slowed it way down, only some big miner luck prevents it from making up time, one block had an implied hashrate to solve 350 diff";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:34 PM";"so the RST continues to amaze and if the TSA cant be stabilized, maybe it just needs to be removed. i do like its much faster than digishield behavior though";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:35 PM";"we will do an ASIC test in 2 hours to verify it works as well with 1000x attacks";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:36 PM";"or maybe will do it so it is  a 10000x";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:38 PM";"I'm having trouble keeping track of what we're doing because there are 3 difficulty and 3 different algorithm, not counting exp()";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:39 PM";"yes, probably nearly impossible to model this accurately";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:39 PM";"any model becomes as complex as the actual implementation";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:39 PM";"no, modelling simulates mining perfectly.";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:40 PM";"there are actually 5, counting the 3/6/12 RST";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:41 PM";"I check for RST.3 to trigger, if not check RST.6, if not check RST.12";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:41 PM";"then if any RST was triggered, calculate all 3 inner values and take the min";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:42 PM";"You do W=6 inner if W=3 triggers?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:42 PM";"when all three are done, it goes into an alternating digishield/TSA mode, was unintentional side effect of how i integrated the TSA";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:42 PM";"i dont have enough bits to encode which trigger triggered";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:42 PM";"so it sees that some RST triggered and checks all three";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:52 PM";"i think i see what might work to transition from RST to digishield cleanly. like you say the onchain values are very good, but we cant use them when RST is active";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:52 PM";"however, i can just use ctA if RST isnt active";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:52 PM";"diff column is input to RST?  What is input to digi?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:52 PM";"diff is just the diff that derives from nBits, nBits -> bnTarget -> diff";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:53 PM";"that's the 6th column?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:53 PM";"yes, diff is sixth column";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:53 PM";"I don't have headers";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:53 PM";"height,timestamp,nBits,bnTarget,ctB,diff,solvetime";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:55 PM";"with RST3/6/12 it gets the diff all the way where it needs to be, so if i just toggle what digishield sees to just ctA when RST not active, it could just work";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:55 PM";"OK, so nBits, nbTarget and diff are same thing.";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:56 PM";"yes, just different formats";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:57 PM";"and ctB is nBits (if it's not zero) that is adjusted by my time^2 equation?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:57 PM";"yes";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:57 PM";"what is the input to digi for RST blocks?  yours looks like it's varying too much";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:58 PM";"very simple code change to toggle digishield to use only ctA when RST is not active. i will test that next, it feels very promising as you already verified ctA is correct for digishield. digishield is currently getting ctB if nonz, all the time, even when RST is not active";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:58 PM";"so for 17 blocks after it ends it is still seeing the ctB that is very volatile, that could be the reason for the problems";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 12:59 PM";"ctA is same as nBits?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 12:59 PM";"sorry, the digishield gets ctB/3 for an RST active block. that was needed to adjust the diff";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:00 PM";"using nBits, digisheild seems about right";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:01 PM";"yes, it looks very clean and should make a nice transition. will test that soon. current test is 10 blocks away from RST having fixed things and then going into the chaos of alternative digishield/TSA_EMA";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:02 PM";"it is at least better than without the /= 3 into the digshield data, but it feels too random. i think there is no big need for TSA_EMA with RST working so well";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:03 PM";"so the only weakness would be the small hashrate boost and ""strandings"", will need to recover via digishield only";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:03 PM";"i guess all things considered that is not so bad a weakness as it just means lower coin emissions";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:03 PM";"and occasionally exp() will trigger, even with a 3x stranding";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:04 PM";"your baby has come a long ways in the last week!";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:08 PM";"so  digi needs  ctA and RST needs ctB and we don't need the 2.72 .";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:08 PM";"Right?";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:09 PM";"the 2.72 wont ever kick in, correct";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:09 PM";"much cleaner";"";"";
"308146361508036618";"Lumbi#8378";"08-Aug-19 01:10 PM";"new amd kernel.";"";"";
"308146361508036618";"Lumbi#8378";"08-Aug-19 01:12 PM";"any feedback would be appreciated";"";"";
"308146361508036618";"Lumbi#8378";"08-Aug-19 01:15 PM";"https://cdn.discordapp.com/attachments/519208579513712660/609011674946600961/input.cl";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:19 PM";"My plan was for RST to catch up and stop  triggering in W  blocks, which might occur by replacing the 1/W in ""i"" with 1/(W+1).  This has the problem of digishield not seeing 17 blocks, so Diff will drop back down almost to where it was......but you see it is supposed to drop down if it was an attack and if  RST stops the attack.....and if RST did not stop the attack, it triggers again after 3 block.....after 3 repeats digi gets close to correct target as it should becuase it seems the attacker is refusing to leave.   But this motivates him to attack 3 on and 3 off until digishield rises beyond his comfort zone.  So he leaves long time and digi slowly falls. Then he returns.  There is no solution to this except to make D rise in first block based on TSA-EMA so that he is at least paying 2x more difficulty than average.";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:21 PM";"but the 6 and 12 kicking in will prevent a 3 on/3 off pattern";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:22 PM";"once the 6 or 12 kickin, then a long stretch will be a bit slower than T";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:23 PM";"No because it catches up so 6 never triggers";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:23 PM";"6 is supposed to tigger if the attack was too small for W=3 to see";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:23 PM";"so a 3 block attack with 3x hashrate? or much bigger?";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:24 PM";"W=3 won't see it.   W=6 will, pretty soon";"";"";
"455741312273219595";"jl777c#5810";"08-Aug-19 01:25 PM";"so a few times of 3on/3off, seems small potatoes";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:26 PM";"Yes, what I'm saying is that we should get the above plan working before addressing smaller attacks.";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:27 PM";"sequence is D, E, R, D or D, E, R, E";"";"";
"352488299077566475";"zawy#5864";"08-Aug-19 01:27 PM";"where D= digi, E=ema, R = RST";"";"";
